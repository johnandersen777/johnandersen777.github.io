<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=hugo-theme content="Axiom 0.6.8"><link rel=icon type=image/png sizes=32x32 href=/image/brand/favicon.png><link rel=icon type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon href=/image/brand/icon-1-1.png><link rel=canonical href=https://johnandersen777.github.io/linux-kernel/><link rel=preload as=style href="/bundle.css?v=1729714413" media=all><link rel=stylesheet href="/bundle.css?v=1729714413" media=all><style>.cdata pre{color:#edf2f7;background-color:#2d3748}.cdata :not(pre)>code{color:#805ad5;background-color:#f7fafc}.chroma .err{color:#fed7d7;background-color:#9b2c2c}.chroma .hl{background-color:#4a5568}.chroma .ln{color:#a0aec0}.chroma .k,.chroma .kc,.chroma .kd,.chroma .kn,.chroma .kp,.chroma .kr{color:#63b3ed}.chroma .kt{color:#b794f4}.chroma .na{color:#f6e05e}.chroma .nb{color:#f6ad55}.chroma .nc{color:#fc8181}.chroma .no{color:#68d391}.chroma .nd{color:#fc8181}.chroma .ne{color:#fc8181}.chroma .nf{color:#f6ad55}.chroma .nt{color:#fc8181}.chroma .l{color:#b794f4}.chroma .dl,.chroma .ld,.chroma .s,.chroma .s2,.chroma .sa,.chroma .sb,.chroma .sc,.chroma .sd{color:#68d391}.chroma .se{color:#a0aec0}.chroma .s1,.chroma .sh,.chroma .si,.chroma .sr,.chroma .ss,.chroma .sx{color:#68d391}.chroma .il,.chroma .m,.chroma .mb,.chroma .mf,.chroma .mh,.chroma .mi,.chroma .mo{color:#b794f4}.chroma .o,.chroma .ow{color:#90cdf4}.chroma .p{color:#cbd5e0}.chroma .c,.chroma .c1,.chroma .ch,.chroma .cm,.chroma .cp,.chroma .cpf,.chroma .cs{color:#a0aec0}.chroma .ge{font-style:italic}.chroma .gs{font-weight:700}</style><title>Linux Kernel Development Tips And Tricks : johnandersen777's blog</title><meta property="og:title" content="Linux Kernel Development Tips And Tricks"><meta property="og:site_name" content="johnandersen777's blog"><meta property="og:url" content="https://johnandersen777.github.io/linux-kernel/"><link rel=image_src href=https://johnandersen777.github.io/image/page-default.webp><meta property="og:image" content="https://johnandersen777.github.io/image/page-default.webp"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="og:type" content="article"><meta property="og:locale" content="en_us"><meta property="og:description" content="Resources https://linux-kernel-labs.github.io/refs/heads/master/index.html Videos Kernel Recipes 2014 - The Linux Kernel, how fast it is developed and how we stay sane doing it https://www.youtube.com/watch?v=DmDmXDtaz-U LPC2019 - Reflections on kernel quality, development process and testing https://www."><meta name=description content="Resources https://linux-kernel-labs.github.io/refs/heads/master/index.html Videos Kernel Recipes 2014 - The Linux Kernel, how fast it is developed and how we stay sane doing it https://www.youtube.com/watch?v=DmDmXDtaz-U LPC2019 - Reflections on kernel quality, development process and testing https://www."><meta property="og:updated_time" content="2020-10-06T08:00:00Z"><meta property="fb:app_id" content><meta name=author content="John Andersen"><meta property="article:author" content="https://johnandersen777.github.io/"><meta property="article:published_time" content="2020-07-24T06:00:00Z"><meta property="article:modified_time" content="2020-10-06T08:00:00Z"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Linux Kernel Development Tips And Tricks","alternativeHeadline":"Working on the Linux kernel itself","url":"https://johnandersen777.github.io/linux-kernel/","image":"https://johnandersen777.github.io/image/page-default.webp","mainEntityOfPage":{"@type":"WebPage","@id":"https://johnandersen777.github.io/linux-kernel/"},"description":"Resources https://linux-kernel-labs.github.io/refs/heads/master/index.html Videos Kernel Recipes 2014 - The Linux Kernel, how fast it is developed and how we stay sane doing it https://www.youtube.com/watch?v=DmDmXDtaz-U LPC2019 - Reflections on kernel quality, development process and testing https://www.","author":{"@type":"Person","name":"John Andersen"},"publisher":{"@type":"Organization","name":"johnandersen777's blog","logo":{"@type":"ImageObject","url":"https://johnandersen777.github.io/image/brand/icon-1-1.png"}},"datePublished":"2020-07-24T06:00:00Z","dateModified":"2020-10-06T08:00:00Z","articleBody":"\u003ch1 id=\"resources\"\u003eResources\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://linux-kernel-labs.github.io/refs/heads/master/index.html\"\u003ehttps://linux-kernel-labs.github.io/refs/heads/master/index.html\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"videos\"\u003eVideos\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003eKernel Recipes 2014 - The Linux Kernel, how fast it is developed and how we stay sane doing it\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=DmDmXDtaz-U\"\u003ehttps://www.youtube.com/watch?v=DmDmXDtaz-U\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eLPC2019 - Reflections on kernel quality, development process and testing\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=iAfrrNdl2f4\"\u003ehttps://www.youtube.com/watch?v=iAfrrNdl2f4\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003evirtio\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://blogs.oracle.com/linux/post/introduction-to-virtio\"\u003ehttps://blogs.oracle.com/linux/post/introduction-to-virtio\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch1 id=\"quickstart\"\u003eQuickstart\u003c/h1\u003e\n\u003cp\u003eWe are going to download the Git repositories of QEMU and the Linux kernel. We\nare not going to cover what dependencies are required. You should read the\nreference links for each section to help you get the compilers and other build\ntools you will need.\u003c/p\u003e\n\u003ch2 id=\"building-the-kernel\"\u003eBuilding the Kernel\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003egit clone https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git\n\u003cspan class=\"nb\"\u003ecd\u003c/span\u003e linux\ngit checkout v5.8\n\u003cspan class=\"c1\"\u003e# Copy your system\u0026#39;s config into the kernel source tree to use as your config\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# You can modify it too if you want but you can be pretty sure this will give\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# you a working kernel without having to edit it\u003c/span\u003e\ncp \u003cspan class=\"k\"\u003e$(\u003c/span\u003els /boot/config-* \u003cspan class=\"p\"\u003e|\u003c/span\u003e head -n 1\u003cspan class=\"k\"\u003e)\u003c/span\u003e .config\nmake olddefconfig\n\u003cspan class=\"c1\"\u003e# Build just the bzImage needed to boot the VM. If you want to build all the\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# modules too, just leave off the last argument (bzImage)\u003c/span\u003e\nmake -j \u003cspan class=\"k\"\u003e$(($(\u003c/span\u003enproc\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"k\"\u003e))\u003c/span\u003e bzImage\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eReferences\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://docs.fedoraproject.org/en-US/quick-docs/kernel/build-custom-kernel/#_get_the_dependencies\"\u003eFedora Build Dependencies\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel#Build_Environment\"\u003eUbuntu Build Dependencies\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"building-qemu\"\u003eBuilding QEMU\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003egit clone https://git.qemu.org/git/qemu.git\n\u003cspan class=\"nb\"\u003ecd\u003c/span\u003e qemu\ngit checkout v5.1.0\ngit submodule init\ngit submodule update --recursive\nmkdir build\n\u003cspan class=\"nb\"\u003ecd\u003c/span\u003e build\n../configure --target-list\u003cspan class=\"o\"\u003e=\u003c/span\u003ex86_64-softmmu\nmake -j \u003cspan class=\"k\"\u003e$(($(\u003c/span\u003enproc\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"k\"\u003e))\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cblockquote\u003e\n\u003cp\u003eReferences\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://wiki.qemu.org/Hosts/Linux\"\u003ehttps://wiki.qemu.org/Hosts/Linux\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.qemu.org/download/#source\"\u003ehttps://www.qemu.org/download/#source\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"running-your-vm\"\u003eRunning your VM\u003c/h2\u003e\n\u003cp\u003ePut the following script in a file called \u003ccode\u003erun-vm.sh\u003c/code\u003e. It will be the way you\nrun your development Kernel in a virtual machine. You can modify it as you wish.\u003c/p\u003e\n\u003cscript src=\"https://gist.github.com/johnandersen777/a0dc3a58b4651dc3761bee65a198a80d.js\"\u003e\u003c/script\u003e\n\u003cp\u003eHere's how you download it, make it executable, and run it.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003ecurl -o run-vm.sh -fSL https://gist.github.com/johnandersen777/a0dc3a58b4651dc3761bee65a198a80d/raw/da2f456c9ecbb56bf84ee30c8c83a2762e86fb43/run-vm.sh \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003e\u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;eb5c49fb0aff6b3293ad6f4bd8c7a9c32df97f40d3c8c4fe404b72c1e9c283b44e714be493ce88b5f22e5bb717b8f71d  run-vm.sh\u0026#34;\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e sha384sum -c - \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"se\"\u003e\\\n\u003c/span\u003e\u003cspan class=\"se\"\u003e\u003c/span\u003echmod \u003cspan class=\"m\"\u003e755\u003c/span\u003e run-vm.sh\n./run-vm.sh\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"tools\"\u003eTools\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://pypi.org/project/b4/\"\u003eb4\u003c/a\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGrab patches from mailing list\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"exploitation\"\u003eExploitation\u003c/h2\u003e\n\u003cp\u003eSMEP disable via ROP, KASLR bypasss via DMESG\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://web.archive.org/web/20171029060939/http://www.blackbunny.io/linux-kernel-x86-64-bypass-smep-kaslr-kptr_restric/\"\u003ehttps://web.archive.org/web/20171029060939/http://www.blackbunny.io/linux-kernel-x86-64-bypass-smep-kaslr-kptr_restric/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"hacking-with-vim\"\u003eHacking With VIM\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/questions/33676829/vim-configuration-for-linux-kernel-development\"\u003ehttps://stackoverflow.com/questions/33676829/vim-configuration-for-linux-kernel-development\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"build-in-tree-modules\"\u003eBuild In Tree Modules\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003emake -j \u003cspan class=\"k\"\u003e$(($(\u003c/span\u003enproc\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"k\"\u003e))\u003c/span\u003e \u003cspan class=\"nv\"\u003eM\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003earch/x86/kvm/ modules\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"install-kernel-to-chroot\"\u003eInstall Kernel To chroot\u003c/h2\u003e\n\u003cp\u003eHere's how you install a kernel to a chroot. Or tar it up and\nsend it over to another system for use there.\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"c1\"\u003e# Edit your config\u003c/span\u003e\nmake olddefconfig\n\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eINSTALL_MOD_PATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e/path/to/your/chroot\n\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eINSTALL_PATH\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eINSTALL_MOD_PATH\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e/boot\nmkdir -p \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eINSTALL_PATH\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# Use number of cores times 4, this usually is about how many\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# threads your system can run\u003c/span\u003e\nmake -j \u003cspan class=\"k\"\u003e$(($(\u003c/span\u003enproc\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"k\"\u003e))\u003c/span\u003e\nmake install\nmake modules_install -j \u003cspan class=\"k\"\u003e$(($(\u003c/span\u003enproc\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"k\"\u003e))\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"chroot\"\u003eChroot\u003c/h2\u003e\n\u003cp\u003eInstead of doing a regular chroot use \u003ccode\u003esystemd-nspawn\u003c/code\u003e which gives you a more fully featured chroot.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://wiki.archlinux.org/index.php/Systemd-nspawn\"\u003ehttps://wiki.archlinux.org/index.php/Systemd-nspawn\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"debugging-with-gdb\"\u003eDebugging With GDB\u003c/h2\u003e\n\u003cp\u003eIf you are lucky enough to be working on something that's in a VM you can get\nGDB working!\u003c/p\u003e\n\u003cp\u003eYou need to run the kernel without KASLR (on the cmdline that's \u003ccode\u003enokaslr\u003c/code\u003e).\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eIf you don't disable KASLR gdb can't set breakpoints or display the source to you\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThen you run QEMU with \u003ccode\u003e-s -S\u003c/code\u003e.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-s\u003c/code\u003e says enable GDB on port \u003ccode\u003e1234\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e-S\u003c/code\u003e says wait to start the VM until GDB connects.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eRun GDB with \u003ccode\u003egdb ./vmlinux\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eNow run\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e(gdb) target remote 127.0.0.1:1234\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eTo view the source code, type \u003ccode\u003elayout src\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eTo focus back on the typey type window, type \u003ccode\u003efocus cmd\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e   \u003cspan class=\"err\"\u003eâ”Œâ”€â”€\u003c/span\u003e\u003cspan class=\"n\"\u003earch\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003ex86\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003ekernel\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003emachine_kexec_64\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ec\u003c/span\u003e\u003cspan class=\"err\"\u003eâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e353\u003c/span\u003e                 \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                                                                      \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e354\u003c/span\u003e                         \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                                                           \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e355\u003c/span\u003e                                                                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e356\u003c/span\u003e                 \u003cspan class=\"cm\"\u003e/* update purgatory as needed */\u003c/span\u003e                                                 \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e357\u003c/span\u003e                 \u003cspan class=\"n\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003earch_update_purgatory\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e                                           \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e358\u003c/span\u003e                 \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                                                                      \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e359\u003c/span\u003e                         \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresult\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                                                           \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e360\u003c/span\u003e                                                                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e361\u003c/span\u003e                 \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                                                                        \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e362\u003c/span\u003e         \u003cspan class=\"p\"\u003e}\u003c/span\u003e                                                                                        \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e363\u003c/span\u003e                                                                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e364\u003c/span\u003e         \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003emachine_kexec_cleanup\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003ekimage\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                                         \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e365\u003c/span\u003e         \u003cspan class=\"p\"\u003e{\u003c/span\u003e                                                                                        \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e366\u003c/span\u003e                 \u003cspan class=\"n\"\u003efree_transition_pgtable\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e367\u003c/span\u003e         \u003cspan class=\"p\"\u003e}\u003c/span\u003e                                                                                        \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e368\u003c/span\u003e                                                                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e369\u003c/span\u003e         \u003cspan class=\"cm\"\u003e/*                                                                                       â”‚\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e   â”‚370          * Do not allocate memory (or fail in any way) in machine_kexec().                       â”‚\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e   â”‚371          * We are past the point of no return, committed to rebooting now.                       â”‚\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e   â”‚372          */\u003c/span\u003e                                                                                      \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e373\u003c/span\u003e         \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"n\"\u003emachine_kexec\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"n\"\u003ekimage\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                                                 \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u0026gt;\u003c/span\u003e\u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e374\u003c/span\u003e         \u003cspan class=\"p\"\u003e{\u003c/span\u003e                                                                                        \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e375\u003c/span\u003e                 \u003cspan class=\"kt\"\u003eunsigned\u003c/span\u003e \u003cspan class=\"kt\"\u003elong\u003c/span\u003e \u003cspan class=\"n\"\u003epage_list\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ePAGES_NR\u003c/span\u003e\u003cspan class=\"p\"\u003e];\u003c/span\u003e                                               \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e376\u003c/span\u003e                 \u003cspan class=\"kt\"\u003evoid\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"n\"\u003econtrol_page\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                                                              \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e377\u003c/span\u003e                 \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003esave_ftrace_enabled\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e                                                         \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e378\u003c/span\u003e                                                                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e379\u003c/span\u003e         \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eifdef\u003c/span\u003e \u003cspan class=\"n\"\u003eCONFIG_KEXEC_JUMP\u003c/span\u003e                                                                 \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e380\u003c/span\u003e                 \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003epreserve_context\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e                                                     \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e381\u003c/span\u003e                         \u003cspan class=\"n\"\u003esave_processor_state\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e382\u003c/span\u003e         \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eendif\u003c/span\u003e                                                                                   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e383\u003c/span\u003e                                                                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e384\u003c/span\u003e                 \u003cspan class=\"n\"\u003esave_ftrace_enabled\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003e__ftrace_enabled_save\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e                                   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e385\u003c/span\u003e                                                                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e386\u003c/span\u003e                 \u003cspan class=\"cm\"\u003e/* Interrupts aren\u0026#39;t acceptable while we reboot */\u003c/span\u003e                               \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e387\u003c/span\u003e                 \u003cspan class=\"n\"\u003elocal_irq_disable\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e                                                             \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e388\u003c/span\u003e                 \u003cspan class=\"n\"\u003ehw_breakpoint_disable\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e                                                         \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e389\u003c/span\u003e                                                                                                  \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e390\u003c/span\u003e                 \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan class=\"n\"\u003epreserve_context\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e                                                   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e391\u003c/span\u003e         \u003cspan class=\"err\"\u003e#\u003c/span\u003e\u003cspan class=\"n\"\u003eifdef\u003c/span\u003e \u003cspan class=\"n\"\u003eCONFIG_X86_IO_APIC\u003c/span\u003e                                                                \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\n   \u003cspan class=\"err\"\u003eâ”‚\u003c/span\u003e\u003cspan class=\"mi\"\u003e392\u003c/span\u003e                         \u003cspan class=\"cm\"\u003e/*                                                                       â”‚\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e   â”‚393                          * We need to put APICs in legacy mode so that we can                    â”‚\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e   â”‚394                          * get timer interrupts in second kernel. kexec/kdump                    â”‚\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e   â”‚395                          * paths already have calls to restore_boot_irq_mode()                   â”‚\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e   â”‚396                          * in one form or other. kexec jump path also need one.                  â”‚\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\u003c/span\u003e\u003cspan class=\"cm\"\u003eremote Thread 1.1 In: machine_kexec                                          L374  PC: 0xffffffff810635f0\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e(gdb) b *machine_kexec\n\u003c/span\u003e\u003cspan class=\"cm\"\u003eBreakpoint 1 at 0xffffffff810635f0: file arch/x86/kernel/machine_kexec_64.c, line 374.\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e(gdb) c\n\u003c/span\u003e\u003cspan class=\"cm\"\u003eContinuing.\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e\n\u003c/span\u003e\u003cspan class=\"cm\"\u003eBreakpoint 1, machine_kexec (image=0xffff888006f96800) at arch/x86/kernel/machine_kexec_64.c:374\n\u003c/span\u003e\u003cspan class=\"cm\"\u003e(gdb)\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eCore dumps and kgdb: \u003ca href=\"https://elinux.org/images/f/f0/Bingham.pdf\"\u003ehttps://elinux.org/images/f/f0/Bingham.pdf\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"kvm\"\u003eKVM\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://lwn.net/Articles/658511/\"\u003ehttps://lwn.net/Articles/658511/\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"nested-and-vmcs\"\u003eNested and VMCS\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://web.archive.org/web/20191105205408/http://events19.linuxfoundation.org/wp-content/uploads/2017/12/Improving-KVM-x86-Nested-Virtualization-Liran-Alon-Oracle.pdf\"\u003ehttps://web.archive.org/web/20191105205408/http://events19.linuxfoundation.org/wp-content/uploads/2017/12/Improving-KVM-x86-Nested-Virtualization-Liran-Alon-Oracle.pdf\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"contributions\"\u003eContributions\u003c/h2\u003e\n\u003cp\u003eIn your patches, write all about what you're doing. The kernel doesn't\nseem to like comments very much. Instead they rely on people writing\ninsanely detailed commit messages describing what they are changing.\u003c/p\u003e\n\u003cp\u003eEvery time you change the kernel you're changing something that has been\nworking fine for someone for X amount of long time. As such, you need to\nbe convincing for why your change should be accepted! Make your coverletter\nand commit messages very detailed. The kernel is a big place. It may have\nbeen a long time since someone reading your patch series has looked at the\nplace you're working. Be courtious and remind them of all the moving pieces\ninvolved in what you're doing, and why and how you're changing them.\u003c/p\u003e\n\u003ch3 id=\"etiquette\"\u003eEtiquette\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eYou can say \u003ccode\u003epatch\u003c/code\u003e or \u003ccode\u003epatchset\u003c/code\u003e in your coverletter. Just not in the\ncommit messages themselves.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"kvm-1\"\u003eKVM\u003c/h2\u003e\n\u003ch3 id=\"vmx\"\u003eVMX\u003c/h3\u003e\n\u003cp\u003eWhen a VM enters VMX root mode (aka \u0026quot;I'm gonna run some VMs mode\u0026quot;) using\nthe \u003ccode\u003eVMXON\u003c/code\u003e instruction, it sets up what's called a \u003ccode\u003eVMCS\u003c/code\u003e for each VM\n/ virtualized processor it wants to run. All VMX related instructions\noperate on whatever VMCS we pointed to via the \u003ccode\u003eVMPTRLD\u003c/code\u003e instruction.\u003c/p\u003e\n\u003ch3 id=\"nested\"\u003eNested\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eL0 == The host\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eL1 == The guest\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eL2 == The guest of the guest\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003evmx/nested.c\u003c/code\u003e is responsible for emulating VMX for L1. When L1 does a\n\u003ccode\u003eVMLAUNCH\u003c/code\u003e or \u003ccode\u003eVMRESUME\u003c/code\u003e, \u003ccode\u003eenter_guest_mode\u003c/code\u003e is called, which means that\n\u003ccode\u003eis_guest_mode\u003c/code\u003e will now return \u003ccode\u003etrue\u003c/code\u003e.\u003c/p\u003e\n\u003ch3 id=\"terminology\"\u003eTerminology\u003c/h3\u003e\n\u003cp\u003eRoot mode = L0 when not running a virtual machine\u003c/p\u003e\n\u003cp\u003eNon-root mode = L0 when running a virtual machine L(n)\u003c/p\u003e\n\u003ch2 id=\"assembly\"\u003eAssembly\u003c/h2\u003e\n\u003cp\u003eWhat is \u003ccode\u003ejmp 1f\u003c/code\u003e?\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/a/27353169/12310488\"\u003ehttps://stackoverflow.com/a/27353169/12310488\u003c/a\u003e\u003c/p\u003e"}</script><link rel=preload as=script href="/bundle.js?v=1729714413"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://stats.g.doubleclick.net><link rel=preconnect href=https://www.googleadservices.com><link rel=preload as=script href="https://www.googletagmanager.com/gtag/js?id=UA-160259978-2"><script src="https://www.googletagmanager.com/gtag/js?id=UA-160259978-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-160259978-2');</script></head><body><header id=nav class=header><div class="ax-l-i max-w-6xl"><div class=ax-logo><a class=block href=/ title="johnandersen777's blog"><img src=/images/avatar2x.png alt="johnandersen777's blog"></a></div><div class=ax-user><a class="p-2 w-8 h-8 block text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" target=_blank rel="noopener nofollow" href="https://www.google.com/search?q=site:johnandersen777.github.io" title=Search><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.67 12.804c0-5.6 4.544-10.134 10.133-10.134s10.134 4.544 10.134 10.134-4.544 10.133-10.134 10.133S2.67 18.393 2.67 12.804zm28.943 16.923-8.868-8.868c4.287-5.3 3.68-13.012-1.378-17.57S8.564-1.066 3.75 3.75s-5.017 12.558-.46 17.618 12.28 5.665 17.57 1.378l8.868 8.868a1.33 1.33.0 002.231-.597c.123-.46-.008-.952-.345-1.29h0z"/></svg></a><a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href=/posts/>Posts</a>
<a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href=/about/>About</a>
<a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href=/a_guide_to_good/>ğŸ’Š</a></div></div></header><main><div class=default-single><div class="ax-title ax-l-o"><div class="ax-l-i max-w-680"><h1 class="post-title font-content-title font-normal leading-tight tracking-default text-40">Linux Kernel Development Tips And Tricks</h1><p class="post-subtitle font-content-sans font-light text-xl text-raven-500 mt-3">Working on the Linux kernel itself</p><div class="ax-meta flex items-center mt-5"><div class="flex-grow min-w-0"><div class="flex items-center"><div class=flex-shrink-0><img class="w-12 h-12 sm:w-14 sm:h-14 object-cover p-05 rounded-full border border-blue-300" src=/images/avatar@2x.png alt="John Andersen"></div><div class="flex-shrink-0 ml-2 leading-tight font-content-sans"><a class="block text-sm text-raven-800 hover:text-raven-900 hover:underline focus:underline" target=_blank rel="noopener nofollow" title="John Andersen" href=https://johnandersen777.github.io/>John Andersen</a>
<time class="text-sm text-raven-500" datetime=2020-07-24T06:00:00Z>Jul 24, 2020 6:00AM</time></div></div></div><div><div class="flex items-center"><a class="flex-shrink-0 block text-raven-800 hover:text-raven-900" target=_blank rel="noopener nofollow" title="Share on Twitter" href="https://twitter.com/intent/tweet?text=Linux%20Kernel%20Development%20Tips%20And%20Tricks%20by%20%40johnandersen777%20https%3a%2f%2fjohnandersen777.github.io%2flinux-kernel%2f"><svg class="w-6 h-6 fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M32 6.078c-1.2.522-2.458.868-3.78 1.036 1.36-.812 2.398-2.088 2.886-3.626a13.11 13.11.0 01-4.16 1.588C25.742 3.794 24.026 3 22.154 3a6.56 6.56.0 00-6.556 6.562c0 .52.044 1.02.152 1.496-5.454-.266-10.28-2.88-13.522-6.862-.566.982-.898 2.106-.898 3.316a6.57 6.57.0 002.914 5.452 6.48 6.48.0 01-2.964-.808v.072c0 3.188 2.274 5.836 5.256 6.446-.534.146-1.116.216-1.72.216-.42.0-.844-.024-1.242-.112.85 2.598 3.262 4.508 6.13 4.57a13.18 13.18.0 01-8.134 2.798c-.538.0-1.054-.024-1.57-.1C2.906 27.93 6.35 29 10.064 29c12.072.0 18.672-10 18.672-18.668.0-.3-.01-.57-.024-.848C30.014 8.56 31.108 7.406 32 6.078z"/></svg></a><a class="ml-3 flex-shrink-0 block text-raven-800 hover:text-raven-900" target=_blank rel="noopener nofollow" title="Share on Facebook" href="https://www.facebook.com/dialog/share?app_id=&display=page&href=https%3a%2f%2fjohnandersen777.github.io%2flinux-kernel%2f"><svg class="w-6 h-6 fill-current" viewBox="-7 -3.5 39 39" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M30.234.0H1.765C.8.001.0.79.0 1.766v28.47C.001 31.2.79 32 1.766 32h15.328V19.625h-4.156V14.78h4.156v-3.564c0-4.134 2.523-6.384 6.21-6.384 1.766.0 3.284.13 3.726.2v4.32h-2.543c-2.006.0-2.394.953-2.394 2.352v3.085h4.797l-.625 4.844h-4.172V32h8.14C31.21 32 32 31.2 32 30.234V1.765C32 .8 31.21.0 30.234.0z"/></svg></a></div></div></div></div></div><div class="ax-content ax-l-o"><div class="ax-l-i max-w-680"><article class=cdata><h1 id=resources>Resources</h1><ul><li><a href=https://linux-kernel-labs.github.io/refs/heads/master/index.html>https://linux-kernel-labs.github.io/refs/heads/master/index.html</a></li></ul><h1 id=videos>Videos</h1><ul><li>Kernel Recipes 2014 - The Linux Kernel, how fast it is developed and how we stay sane doing it<ul><li><a href="https://www.youtube.com/watch?v=DmDmXDtaz-U">https://www.youtube.com/watch?v=DmDmXDtaz-U</a></li></ul></li><li>LPC2019 - Reflections on kernel quality, development process and testing<ul><li><a href="https://www.youtube.com/watch?v=iAfrrNdl2f4">https://www.youtube.com/watch?v=iAfrrNdl2f4</a></li></ul></li><li>virtio<ul><li><a href=https://blogs.oracle.com/linux/post/introduction-to-virtio>https://blogs.oracle.com/linux/post/introduction-to-virtio</a></li></ul></li></ul><h1 id=quickstart>Quickstart</h1><p>We are going to download the Git repositories of QEMU and the Linux kernel. We
are not going to cover what dependencies are required. You should read the
reference links for each section to help you get the compilers and other build
tools you will need.</p><h2 id=building-the-kernel>Building the Kernel</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>git clone https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
<span class=nb>cd</span> linux
git checkout v5.8
<span class=c1># Copy your system&#39;s config into the kernel source tree to use as your config</span>
<span class=c1># You can modify it too if you want but you can be pretty sure this will give</span>
<span class=c1># you a working kernel without having to edit it</span>
cp <span class=k>$(</span>ls /boot/config-* <span class=p>|</span> head -n 1<span class=k>)</span> .config
make olddefconfig
<span class=c1># Build just the bzImage needed to boot the VM. If you want to build all the</span>
<span class=c1># modules too, just leave off the last argument (bzImage)</span>
make -j <span class=k>$(($(</span>nproc<span class=k>)</span><span class=o>*</span><span class=m>4</span><span class=k>))</span> bzImage
</code></pre></div><blockquote><p>References</p><ul><li><a href=https://docs.fedoraproject.org/en-US/quick-docs/kernel/build-custom-kernel/#_get_the_dependencies>Fedora Build Dependencies</a></li><li><a href=https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel#Build_Environment>Ubuntu Build Dependencies</a></li></ul></blockquote><h2 id=building-qemu>Building QEMU</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>git clone https://git.qemu.org/git/qemu.git
<span class=nb>cd</span> qemu
git checkout v5.1.0
git submodule init
git submodule update --recursive
mkdir build
<span class=nb>cd</span> build
../configure --target-list<span class=o>=</span>x86_64-softmmu
make -j <span class=k>$(($(</span>nproc<span class=k>)</span><span class=o>*</span><span class=m>4</span><span class=k>))</span>
</code></pre></div><blockquote><p>References</p><ul><li><a href=https://wiki.qemu.org/Hosts/Linux>https://wiki.qemu.org/Hosts/Linux</a></li><li><a href=https://www.qemu.org/download/#source>https://www.qemu.org/download/#source</a></li></ul></blockquote><h2 id=running-your-vm>Running your VM</h2><p>Put the following script in a file called <code>run-vm.sh</code>. It will be the way you
run your development Kernel in a virtual machine. You can modify it as you wish.</p><script src=https://gist.github.com/johnandersen777/a0dc3a58b4651dc3761bee65a198a80d.js></script><p>Here's how you download it, make it executable, and run it.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -o run-vm.sh -fSL https://gist.github.com/johnandersen777/a0dc3a58b4651dc3761bee65a198a80d/raw/da2f456c9ecbb56bf84ee30c8c83a2762e86fb43/run-vm.sh <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span><span class=nb>echo</span> <span class=s2>&#34;eb5c49fb0aff6b3293ad6f4bd8c7a9c32df97f40d3c8c4fe404b72c1e9c283b44e714be493ce88b5f22e5bb717b8f71d  run-vm.sh&#34;</span> <span class=p>|</span> sha384sum -c - <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>chmod <span class=m>755</span> run-vm.sh
./run-vm.sh
</code></pre></div><h2 id=tools>Tools</h2><ul><li><p><a href=https://pypi.org/project/b4/>b4</a></p><ul><li>Grab patches from mailing list</li></ul></li></ul><h2 id=exploitation>Exploitation</h2><p>SMEP disable via ROP, KASLR bypasss via DMESG</p><ul><li><a href=https://web.archive.org/web/20171029060939/http://www.blackbunny.io/linux-kernel-x86-64-bypass-smep-kaslr-kptr_restric/>https://web.archive.org/web/20171029060939/http://www.blackbunny.io/linux-kernel-x86-64-bypass-smep-kaslr-kptr_restric/</a></li></ul><h2 id=hacking-with-vim>Hacking With VIM</h2><p><a href=https://stackoverflow.com/questions/33676829/vim-configuration-for-linux-kernel-development>https://stackoverflow.com/questions/33676829/vim-configuration-for-linux-kernel-development</a></p><h2 id=build-in-tree-modules>Build In Tree Modules</h2><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>make -j <span class=k>$(($(</span>nproc<span class=k>)</span><span class=o>*</span><span class=m>4</span><span class=k>))</span> <span class=nv>M</span><span class=o>=</span>arch/x86/kvm/ modules
</code></pre></div><h2 id=install-kernel-to-chroot>Install Kernel To chroot</h2><p>Here's how you install a kernel to a chroot. Or tar it up and
send it over to another system for use there.</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Edit your config</span>
make olddefconfig
<span class=nb>export</span> <span class=nv>INSTALL_MOD_PATH</span><span class=o>=</span>/path/to/your/chroot
<span class=nb>export</span> <span class=nv>INSTALL_PATH</span><span class=o>=</span><span class=si>${</span><span class=nv>INSTALL_MOD_PATH</span><span class=si>}</span>/boot
mkdir -p <span class=s2>&#34;</span><span class=si>${</span><span class=nv>INSTALL_PATH</span><span class=si>}</span><span class=s2>&#34;</span>
<span class=c1># Use number of cores times 4, this usually is about how many</span>
<span class=c1># threads your system can run</span>
make -j <span class=k>$(($(</span>nproc<span class=k>)</span><span class=o>*</span><span class=m>4</span><span class=k>))</span>
make install
make modules_install -j <span class=k>$(($(</span>nproc<span class=k>)</span><span class=o>*</span><span class=m>4</span><span class=k>))</span>
</code></pre></div><h2 id=chroot>Chroot</h2><p>Instead of doing a regular chroot use <code>systemd-nspawn</code> which gives you a more fully featured chroot.</p><p><a href=https://wiki.archlinux.org/index.php/Systemd-nspawn>https://wiki.archlinux.org/index.php/Systemd-nspawn</a></p><h2 id=debugging-with-gdb>Debugging With GDB</h2><p>If you are lucky enough to be working on something that's in a VM you can get
GDB working!</p><p>You need to run the kernel without KASLR (on the cmdline that's <code>nokaslr</code>).</p><blockquote><p>If you don't disable KASLR gdb can't set breakpoints or display the source to you</p></blockquote><p>Then you run QEMU with <code>-s -S</code>.</p><ul><li><code>-s</code> says enable GDB on port <code>1234</code></li><li><code>-S</code> says wait to start the VM until GDB connects.</li></ul><p>Run GDB with <code>gdb ./vmlinux</code></p><p>Now run</p><pre><code class=language-console data-lang=console>(gdb) target remote 127.0.0.1:1234
</code></pre><p>To view the source code, type <code>layout src</code></p><p>To focus back on the typey type window, type <code>focus cmd</code></p><div class=highlight><pre class=chroma><code class=language-c data-lang=c>   <span class=err>â”Œâ”€â”€</span><span class=n>arch</span><span class=o>/</span><span class=n>x86</span><span class=o>/</span><span class=n>kernel</span><span class=o>/</span><span class=n>machine_kexec_64</span><span class=p>.</span><span class=n>c</span><span class=err>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
   <span class=err>â”‚</span><span class=mi>353</span>                 <span class=k>if</span> <span class=p>(</span><span class=n>result</span><span class=p>)</span>                                                                      <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>354</span>                         <span class=k>return</span> <span class=n>result</span><span class=p>;</span>                                                           <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>355</span>                                                                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>356</span>                 <span class=cm>/* update purgatory as needed */</span>                                                 <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>357</span>                 <span class=n>result</span> <span class=o>=</span> <span class=n>arch_update_purgatory</span><span class=p>(</span><span class=n>image</span><span class=p>);</span>                                           <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>358</span>                 <span class=k>if</span> <span class=p>(</span><span class=n>result</span><span class=p>)</span>                                                                      <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>359</span>                         <span class=k>return</span> <span class=n>result</span><span class=p>;</span>                                                           <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>360</span>                                                                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>361</span>                 <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>                                                                        <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>362</span>         <span class=p>}</span>                                                                                        <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>363</span>                                                                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>364</span>         <span class=kt>void</span> <span class=n>machine_kexec_cleanup</span><span class=p>(</span><span class=k>struct</span> <span class=n>kimage</span> <span class=o>*</span><span class=n>image</span><span class=p>)</span>                                         <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>365</span>         <span class=p>{</span>                                                                                        <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>366</span>                 <span class=n>free_transition_pgtable</span><span class=p>(</span><span class=n>image</span><span class=p>);</span>                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>367</span>         <span class=p>}</span>                                                                                        <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>368</span>                                                                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>369</span>         <span class=cm>/*                                                                                       â”‚
</span><span class=cm>   â”‚370          * Do not allocate memory (or fail in any way) in machine_kexec().                       â”‚
</span><span class=cm>   â”‚371          * We are past the point of no return, committed to rebooting now.                       â”‚
</span><span class=cm>   â”‚372          */</span>                                                                                      <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>373</span>         <span class=kt>void</span> <span class=n>machine_kexec</span><span class=p>(</span><span class=k>struct</span> <span class=n>kimage</span> <span class=o>*</span><span class=n>image</span><span class=p>)</span>                                                 <span class=err>â”‚</span>
<span class=n>B</span><span class=o>+&gt;</span><span class=err>â”‚</span><span class=mi>374</span>         <span class=p>{</span>                                                                                        <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>375</span>                 <span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>page_list</span><span class=p>[</span><span class=n>PAGES_NR</span><span class=p>];</span>                                               <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>376</span>                 <span class=kt>void</span> <span class=o>*</span><span class=n>control_page</span><span class=p>;</span>                                                              <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>377</span>                 <span class=kt>int</span> <span class=n>save_ftrace_enabled</span><span class=p>;</span>                                                         <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>378</span>                                                                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>379</span>         <span class=err>#</span><span class=n>ifdef</span> <span class=n>CONFIG_KEXEC_JUMP</span>                                                                 <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>380</span>                 <span class=k>if</span> <span class=p>(</span><span class=n>image</span><span class=o>-&gt;</span><span class=n>preserve_context</span><span class=p>)</span>                                                     <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>381</span>                         <span class=n>save_processor_state</span><span class=p>();</span>                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>382</span>         <span class=err>#</span><span class=n>endif</span>                                                                                   <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>383</span>                                                                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>384</span>                 <span class=n>save_ftrace_enabled</span> <span class=o>=</span> <span class=n>__ftrace_enabled_save</span><span class=p>();</span>                                   <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>385</span>                                                                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>386</span>                 <span class=cm>/* Interrupts aren&#39;t acceptable while we reboot */</span>                               <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>387</span>                 <span class=n>local_irq_disable</span><span class=p>();</span>                                                             <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>388</span>                 <span class=n>hw_breakpoint_disable</span><span class=p>();</span>                                                         <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>389</span>                                                                                                  <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>390</span>                 <span class=k>if</span> <span class=p>(</span><span class=n>image</span><span class=o>-&gt;</span><span class=n>preserve_context</span><span class=p>)</span> <span class=p>{</span>                                                   <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>391</span>         <span class=err>#</span><span class=n>ifdef</span> <span class=n>CONFIG_X86_IO_APIC</span>                                                                <span class=err>â”‚</span>
   <span class=err>â”‚</span><span class=mi>392</span>                         <span class=cm>/*                                                                       â”‚
</span><span class=cm>   â”‚393                          * We need to put APICs in legacy mode so that we can                    â”‚
</span><span class=cm>   â”‚394                          * get timer interrupts in second kernel. kexec/kdump                    â”‚
</span><span class=cm>   â”‚395                          * paths already have calls to restore_boot_irq_mode()                   â”‚
</span><span class=cm>   â”‚396                          * in one form or other. kexec jump path also need one.                  â”‚
</span><span class=cm>   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span class=cm>remote Thread 1.1 In: machine_kexec                                          L374  PC: 0xffffffff810635f0
</span><span class=cm>(gdb) b *machine_kexec
</span><span class=cm>Breakpoint 1 at 0xffffffff810635f0: file arch/x86/kernel/machine_kexec_64.c, line 374.
</span><span class=cm>(gdb) c
</span><span class=cm>Continuing.
</span><span class=cm>
</span><span class=cm>Breakpoint 1, machine_kexec (image=0xffff888006f96800) at arch/x86/kernel/machine_kexec_64.c:374
</span><span class=cm>(gdb)
</span></code></pre></div><p>Core dumps and kgdb: <a href=https://elinux.org/images/f/f0/Bingham.pdf>https://elinux.org/images/f/f0/Bingham.pdf</a></p><h2 id=kvm>KVM</h2><p><a href=https://lwn.net/Articles/658511/>https://lwn.net/Articles/658511/</a></p><h3 id=nested-and-vmcs>Nested and VMCS</h3><p><a href=https://web.archive.org/web/20191105205408/http://events19.linuxfoundation.org/wp-content/uploads/2017/12/Improving-KVM-x86-Nested-Virtualization-Liran-Alon-Oracle.pdf>https://web.archive.org/web/20191105205408/http://events19.linuxfoundation.org/wp-content/uploads/2017/12/Improving-KVM-x86-Nested-Virtualization-Liran-Alon-Oracle.pdf</a></p><h2 id=contributions>Contributions</h2><p>In your patches, write all about what you're doing. The kernel doesn't
seem to like comments very much. Instead they rely on people writing
insanely detailed commit messages describing what they are changing.</p><p>Every time you change the kernel you're changing something that has been
working fine for someone for X amount of long time. As such, you need to
be convincing for why your change should be accepted! Make your coverletter
and commit messages very detailed. The kernel is a big place. It may have
been a long time since someone reading your patch series has looked at the
place you're working. Be courtious and remind them of all the moving pieces
involved in what you're doing, and why and how you're changing them.</p><h3 id=etiquette>Etiquette</h3><ul><li>You can say <code>patch</code> or <code>patchset</code> in your coverletter. Just not in the
commit messages themselves.</li></ul><h2 id=kvm-1>KVM</h2><h3 id=vmx>VMX</h3><p>When a VM enters VMX root mode (aka "I'm gonna run some VMs mode") using
the <code>VMXON</code> instruction, it sets up what's called a <code>VMCS</code> for each VM
/ virtualized processor it wants to run. All VMX related instructions
operate on whatever VMCS we pointed to via the <code>VMPTRLD</code> instruction.</p><h3 id=nested>Nested</h3><ul><li><p>L0 == The host</p></li><li><p>L1 == The guest</p></li><li><p>L2 == The guest of the guest</p></li></ul><p><code>vmx/nested.c</code> is responsible for emulating VMX for L1. When L1 does a
<code>VMLAUNCH</code> or <code>VMRESUME</code>, <code>enter_guest_mode</code> is called, which means that
<code>is_guest_mode</code> will now return <code>true</code>.</p><h3 id=terminology>Terminology</h3><p>Root mode = L0 when not running a virtual machine</p><p>Non-root mode = L0 when running a virtual machine L(n)</p><h2 id=assembly>Assembly</h2><p>What is <code>jmp 1f</code>?</p><p><a href=https://stackoverflow.com/a/27353169/12310488>https://stackoverflow.com/a/27353169/12310488</a></p></article></div></div></div></main><footer class=footer><div class="ax-l-i max-w-6xl"><nav class="flex items-center justify-center"><a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href=/posts/>Posts</a>
<a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href=/about/>About</a>
<a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href=/a_guide_to_good/>ğŸ’Š</a></nav><div class="footer-social flex items-center justify-center mt-4"><a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target=_blank rel="noopener nofollow" title=Twitter href=https://mastodon.social/@johnandersen777><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M32 6.078c-1.2.522-2.458.868-3.78 1.036 1.36-.812 2.398-2.088 2.886-3.626a13.11 13.11.0 01-4.16 1.588C25.742 3.794 24.026 3 22.154 3a6.56 6.56.0 00-6.556 6.562c0 .52.044 1.02.152 1.496-5.454-.266-10.28-2.88-13.522-6.862-.566.982-.898 2.106-.898 3.316a6.57 6.57.0 002.914 5.452 6.48 6.48.0 01-2.964-.808v.072c0 3.188 2.274 5.836 5.256 6.446-.534.146-1.116.216-1.72.216-.42.0-.844-.024-1.242-.112.85 2.598 3.262 4.508 6.13 4.57a13.18 13.18.0 01-8.134 2.798c-.538.0-1.054-.024-1.57-.1C2.906 27.93 6.35 29 10.064 29c12.072.0 18.672-10 18.672-18.668.0-.3-.01-.57-.024-.848C30.014 8.56 31.108 7.406 32 6.078z"/></svg></a><a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target=_blank rel="noopener nofollow" title=Github href=https://github.com/johnandersen777><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M15.998.0C7.164.0.0 7.35.0 16.417.0 23.67 4.584 29.82 10.944 31.994c.8.15 1.092-.356 1.092-.79l-.022-2.792c-4.45.99-5.4-2.202-5.4-2.202-.726-1.896-1.776-2.4-1.776-2.4-1.454-1.018.108-.998.108-.998 1.606.117 2.45 1.693 2.45 1.693 1.428 2.507 3.746 1.784 4.658 1.363.144-1.06.558-1.784 1.016-2.195-3.552-.415-7.288-1.823-7.288-8.113.0-1.792.624-3.258 1.648-4.406-.166-.415-.714-2.085.156-4.344.0.0 1.344-.44 4.4 1.683 1.276-.364 2.644-.546 4.006-.552a14.98 14.98.0 014.006.554C23.062 6.37 24.404 6.8 24.404 6.8c.872 2.26.324 3.93.16 4.344 1.026 1.148 1.644 2.614 1.644 4.406.0 6.306-3.74 7.694-7.304 8.1.574.507 1.086 1.51 1.086 3.04l-.02 4.503c0 .44.288.95 1.1.788C27.42 29.817 32 23.667 32 16.417 32 7.35 24.836.0 15.998.0z"/></svg></a><a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target=_blank rel="noopener nofollow" title=Youtube href=https://www.youtube.com/@dffml9083/playlists><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M30.64 7.12c-.868-1.544-1.8-1.828-3.728-1.936C24.996 5.054 20.178 5 16.004 5c-4.182.0-9.002.054-10.916.182-1.914.1-2.858.392-3.734 1.938C.46 8.662.0 11.318.0 15.994V16c0 4.656.46 7.332 1.354 8.858.876 1.544 1.818 1.824 3.732 1.954 1.916.112 6.736.178 10.918.178 4.174.0 8.992-.066 10.9-.176 1.918-.13 2.86-.4 3.728-1.954.902-1.526 1.358-4.202 1.358-8.858v-.016c0-4.678-.456-7.334-1.36-8.876zM12 22V10l10 6-10 6z"/></svg></a><a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target=_blank rel="noopener nofollow" title=LinkedIn href=https://www.linkedin.com/in/john-andersen-7a72b555/><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M29.692.0H2.308A2.31 2.31.0 000 2.308v27.384A2.31 2.31.0 002.308 32h27.384A2.31 2.31.0 0032 29.692V2.308A2.31 2.31.0 0029.692.0zM11.35 24.188H7.454V12.464h3.897v11.723zM9.402 10.863h-.025c-1.308.0-2.153-.9-2.153-2.025.0-1.15.872-2.026 2.205-2.026s2.153.875 2.18 2.026c0 1.125-.846 2.025-2.205 2.025zm16 13.324h-3.896v-6.272c0-1.576-.564-2.65-1.974-2.65-1.076.0-1.717.725-2 1.425-.103.25-.128.6-.128.95v6.547h-3.896V12.464h3.896v1.66c.518-.8 1.444-1.935 3.512-1.935 2.564.0 4.486 1.676 4.486 5.276v6.722z"/></svg></a></div><div class="footer-copyright text-sm text-center text-gray-500 mt-4">&#169; 2016-2024 johnandersen777's blog</div><div class="text-sm sm:text-xs text-center text-gray-500 mt-2">Powered by <a href="https://www.axiomtheme.com/?utm_source=theme-footer&utm_medium=website&utm_campaign=referral">Axiom</a></div></div></footer><script src="/bundle.js?v=1729714413"></script></body></html>