<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=hugo-theme content="Axiom 0.6.8"><link rel=icon type=image/png sizes=32x32 href=/image/brand/favicon.png><link rel=icon type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon href=/image/brand/icon-1-1.png><link rel=canonical href=https://johnandersen777.github.io/tricks/><link rel=preload as=style href="/bundle.css?v=1729715610" media=all><link rel=stylesheet href="/bundle.css?v=1729715610" media=all><style>.cdata pre{color:#edf2f7;background-color:#2d3748}.cdata :not(pre)>code{color:#805ad5;background-color:#f7fafc}.chroma .err{color:#fed7d7;background-color:#9b2c2c}.chroma .hl{background-color:#4a5568}.chroma .ln{color:#a0aec0}.chroma .k,.chroma .kc,.chroma .kd,.chroma .kn,.chroma .kp,.chroma .kr{color:#63b3ed}.chroma .kt{color:#b794f4}.chroma .na{color:#f6e05e}.chroma .nb{color:#f6ad55}.chroma .nc{color:#fc8181}.chroma .no{color:#68d391}.chroma .nd{color:#fc8181}.chroma .ne{color:#fc8181}.chroma .nf{color:#f6ad55}.chroma .nt{color:#fc8181}.chroma .l{color:#b794f4}.chroma .dl,.chroma .ld,.chroma .s,.chroma .s2,.chroma .sa,.chroma .sb,.chroma .sc,.chroma .sd{color:#68d391}.chroma .se{color:#a0aec0}.chroma .s1,.chroma .sh,.chroma .si,.chroma .sr,.chroma .ss,.chroma .sx{color:#68d391}.chroma .il,.chroma .m,.chroma .mb,.chroma .mf,.chroma .mh,.chroma .mi,.chroma .mo{color:#b794f4}.chroma .o,.chroma .ow{color:#90cdf4}.chroma .p{color:#cbd5e0}.chroma .c,.chroma .c1,.chroma .ch,.chroma .cm,.chroma .cp,.chroma .cpf,.chroma .cs{color:#a0aec0}.chroma .ge{font-style:italic}.chroma .gs{font-weight:700}</style><title>Time Saving Tricks and Hacks : johnandersen777's blog</title><meta property="og:title" content="Time Saving Tricks and Hacks"><meta property="og:site_name" content="johnandersen777's blog"><meta property="og:url" content="https://johnandersen777.github.io/tricks/"><link rel=image_src href=https://johnandersen777.github.io/image/page-default.webp><meta property="og:image" content="https://johnandersen777.github.io/image/page-default.webp"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="og:type" content="article"><meta property="og:locale" content="en_us"><meta property="og:description" content="dos2unix in Python Remove carriage returns from CRLF (carriage return, line feed: \r\n). $ python -c 'import pathlib, sys; p = pathlib.Path(sys.argv[-1]); p.write_bytes(p.read_bytes().replace(b&amp;quot;\r&amp;quot;, b&amp;quot;&amp;quot;))' file.txt Get list of available versions $ python -m pip install dffml== Download file with Python from command line with progress $ python3 -c 'import sys, functools, urllib."><meta name=description content="dos2unix in Python Remove carriage returns from CRLF (carriage return, line feed: \r\n). $ python -c 'import pathlib, sys; p = pathlib.Path(sys.argv[-1]); p.write_bytes(p.read_bytes().replace(b&amp;quot;\r&amp;quot;, b&amp;quot;&amp;quot;))' file.txt Get list of available versions $ python -m pip install dffml== Download file with Python from command line with progress $ python3 -c 'import sys, functools, urllib."><meta property="og:updated_time" content="2020-07-07T19:00:00Z"><meta property="fb:app_id" content><meta name=author content="John Andersen"><meta property="article:author" content="https://johnandersen777.github.io/"><meta property="article:published_time" content="2020-07-07T19:00:00Z"><meta property="article:modified_time" content="2020-07-07T19:00:00Z"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"Time Saving Tricks and Hacks","alternativeHeadline":"dos2unix in Python Remove carriage returns from CRLF (carriage return, line feed: \\r\\n). $ python -c 'import pathlib, sys; p = pathlib.Path(sys.argv[-1]); p.write_bytes(p.read_bytes().replace(b\u0026quot;\\r\u0026quot;, b\u0026quot;\u0026quot;))' file.txt Get list of available versions $ python -m pip install dffml== Download file with Python from command line with progress $ python3 -c 'import sys, functools, urllib.","url":"https://johnandersen777.github.io/tricks/","image":"https://johnandersen777.github.io/image/page-default.webp","mainEntityOfPage":{"@type":"WebPage","@id":"https://johnandersen777.github.io/tricks/"},"description":"dos2unix in Python Remove carriage returns from CRLF (carriage return, line feed: \\r\\n). $ python -c 'import pathlib, sys; p = pathlib.Path(sys.argv[-1]); p.write_bytes(p.read_bytes().replace(b\u0026quot;\\r\u0026quot;, b\u0026quot;\u0026quot;))' file.txt Get list of available versions $ python -m pip install dffml== Download file with Python from command line with progress $ python3 -c 'import sys, functools, urllib.","author":{"@type":"Person","name":"John Andersen"},"publisher":{"@type":"Organization","name":"johnandersen777's blog","logo":{"@type":"ImageObject","url":"https://johnandersen777.github.io/image/brand/icon-1-1.png"}},"datePublished":"2020-07-07T19:00:00Z","dateModified":"2020-07-07T19:00:00Z","articleBody":"\u003ch2 id=\"dos2unix-in-python\"\u003edos2unix in Python\u003c/h2\u003e\n\u003cp\u003eRemove carriage returns from CRLF (carriage return, line feed: \u003ccode\u003e\\r\\n\u003c/code\u003e).\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -c 'import pathlib, sys; p = pathlib.Path(sys.argv[-1]); p.write_bytes(p.read_bytes().replace(b\u0026quot;\\r\u0026quot;, b\u0026quot;\u0026quot;))' file.txt\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"get-list-of-available-versions\"\u003eGet list of available versions\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -m pip install dffml==\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"download-file-with-python-from-command-line-with-progress\"\u003eDownload file with Python from command line with progress\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python3 -c 'import sys, functools, urllib.request; print(urllib.request.urlretrieve(sys.argv[-1], reporthook=lambda n, c, t: print(f\u0026quot;{round(((n*c)/t) * 100, 2)}%\u0026quot;, end=\u0026quot;\\r\u0026quot;, file=sys.stderr))[0])' https://storage.googleapis.com/laurencemoroney-blog.appspot.com/rps.zip\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://asciinema.org/a/357044\"\u003e\u003cimg src=\"https://asciinema.org/a/357044.svg\" alt=\"asciicast\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"display-only-blocks-of-text-with-certain-text-in-them\"\u003eDisplay only blocks of text with certain text in them\u003c/h2\u003e\n\u003cp\u003eUse grep to displays blocks of text. Only display blocks with certain text\ninside them.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ git grep -A 25 -E 'dffml train|dffml accuracy|dffml predict' | python -c 'import sys; print(\u0026quot;--\u0026quot;.join([i for i in sys.stdin.read().split(\u0026quot;--\u0026quot;) if not \u0026quot;model-directory\u0026quot; in i]).strip())'\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"display-a-file-as-plain-text-in-a-browser\"\u003eDisplay a file as plain text in a browser\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ (echo -e 'HTTP/1.0 200 OK\\n' \u0026amp;\u0026amp; cat myfile.txt) | nc -Nlp 8000\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eIf you have \u003ccode\u003esocat\u003c/code\u003e that's better, as chrome sometimes requests the favicon then netcat closes the listening socket. \u003ccode\u003esocat\u003c/code\u003e will serve multiple connections.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ (echo -e 'HTTP 1.0\\n200 OK\\n' \u0026amp;\u0026amp; cat myfile.txt | tee /dev/stderr | socat - TCP-LISTEN:8000,fork,reuseaddr\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eRedisplay on reload.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003e-N\u003c/code\u003e to netcat mean close socket on EOF from STDIN\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ nodemon -e md --exec \u0026quot;clear; while test 1; do (echo -e 'HTTP/1.0 200 OK\\n' \u0026amp;\u0026amp; cat open-architecture.md) | nc -Nlp 8000; sleep 0.5; done; test 1\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"do-a-vim-commands-on-files-in-an-automated-way\"\u003eDo a vim commands on files in an automated way\u003c/h2\u003e\n\u003cp\u003eRemove all newlines from end of file\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ for file in $(echo examples/notebooks/*.ipynb); do vim -b '+set noeol' '+wq' $file; done\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"open-a-list-of-files-in-tmux-panes\"\u003eOpen a list of files in tmux panes\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tmux/tmux/wiki/Advanced-Use\"\u003ehttps://github.com/tmux/tmux/wiki/Advanced-Use\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ for file in $(git ls-files | grep -E '.*\\.cpp|.*\\.h|.*\\.ino'); do tmux split-window -h \u0026quot;vim ${file}\u0026quot;; tmux next-layout; done\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://asciinema.org/a/441107\"\u003e\u003cimg src=\"https://asciinema.org/a/441107.svg\" alt=\"asciicast\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"close-all-but-the-active-tmux-pane\"\u003eClose all but the active tmux pane\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$  for pane in $(tmux list-pane | grep -v active | sed -e 's/:.*//g'); do export pane=$(tmux list-pane | grep -v active | sed -e 's/:.*//g' | head -n 1); tmux kill-pane -t $pane ; done\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"scrape-page-for-links\"\u003eScrape page for links\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ curl -sfL \u0026quot;https://pypi.org/simple/dffml/\u0026quot; | python -u -c 'import sys, json, bs4; print(json.dumps({link.get_text(): link.get(\u0026quot;href\u0026quot;) for link in bs4.BeautifulSoup(sys.stdin.read(), \u0026quot;html.parser\u0026quot;).find_all(\u0026quot;a\u0026quot;)}))' | python -m json.tool\n{\n    \u0026quot;dffml-0.4.0.post0-py3-none-any.whl\u0026quot;: \u0026quot;https://files.pythonhosted.org/packages/37/d5/6dc945d453cbdeb15db4249fe09e07bdd2e750a6f256fd893c81ced7bbbb/dffml-0.4.0.post0-py3-none-any.whl#sha256=031dd3a4ca57d46f568f7dd2711a223a26bc343f5f2ac36e1af881ead19e05b6\u0026quot;,\n    \u0026quot;dffml-0.4.0.post0.tar.gz\u0026quot;: \u0026quot;https://files.pythonhosted.org/packages/b0/42/a151555fe3b45926fa041813f8513d883180bdb9e8def64d2d5260609743/dffml-0.4.0.post0.tar.gz#sha256=f6f898c504450e3514dd5791b31bcba21ad9edfc3e896ac5da9cbe3181af5d2b\u0026quot;\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"sign-and-verify-data-using-ssh-keys\"\u003eSign and verify data using ssh keys\u003c/h2\u003e\n\u003cp\u003eReferences:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://www.agwa.name/blog/post/ssh_signatures\"\u003ehttps://www.agwa.name/blog/post/ssh_signatures\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ podman run -v $HOME/.ssh/:/root/.ssh:ro -v $PWD:/usr/src/workdir -w /usr/src/workdir --rm -ti --entrypoint ssh-keygen lscr.io/linuxserver/openssh-server -Y sign -f /root/.ssh/mykeyname -n file CHANGELOG.md\n$ (printf 'alice@example.com ' \u0026amp;\u0026amp; cat ~/.ssh/mykeyname.pub) | tee allowed_signers\n$ cat CHANGELOG.md | podman run -v $HOME/.ssh/:/root/.ssh:ro -v $PWD:/usr/src/workdir -w /usr/src/workdir --rm -i --entrypoint ssh-keygen lscr.io/linuxserver/openssh-server -Y verify -f allowed_signers -I alice@example.com -n file -s CHANGELOG.md.sig\nGood \u0026quot;file\u0026quot; signature for alice@example.com with RSA key SHA256:RQsUY/opy5KWg+pesXcjI9I3I1z8udgkFAlOjDrv8cw\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"git-stash-show-patch\"\u003egit stash show patch\u003c/h2\u003e\n\u003cp\u003eShows just applied patch\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ git stash show -p\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"wsl-start-sshd\"\u003ewsl start sshd\u003c/h2\u003e\n\u003cp\u003eFrom powershell:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ Start-Job -ScriptBlock{wsl -u root -e mkdir -pv /run/sshd ; wsl -u root -e /usr/sbin/sshd -D}\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"wsl-forward-port\"\u003eWSL Forward Port\u003c/h2\u003e\n\u003cp\u003eRun the following from an Administrator PowerShell session\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"nb\"\u003ePS \u003c/span\u003e\u003cspan class=\"n\"\u003eC:\u003c/span\u003e\u003cspan class=\"p\"\u003e\\\u003c/span\u003e\u003cspan class=\"n\"\u003eWINDOWS\u003c/span\u003e\u003cspan class=\"p\"\u003e\\\u003c/span\u003e\u003cspan class=\"n\"\u003esystem32\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enetsh\u003c/span\u003e \u003cspan class=\"n\"\u003einterface\u003c/span\u003e \u003cspan class=\"n\"\u003eportproxy\u003c/span\u003e \u003cspan class=\"n\"\u003eadd\u003c/span\u003e \u003cspan class=\"n\"\u003ev4tov4\u003c/span\u003e \u003cspan class=\"n\"\u003elistenaddress\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e0\u003c/span\u003e \u003cspan class=\"n\"\u003elistenport\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003e2222\u003c/span\u003e \u003cspan class=\"n\"\u003econnectaddress\u003c/span\u003e\u003cspan class=\"p\"\u003e=((\u003c/span\u003e\u003cspan class=\"n\"\u003ewsl\u003c/span\u003e \u003cspan class=\"n\"\u003e-u\u003c/span\u003e \u003cspan class=\"n\"\u003eroot\u003c/span\u003e \u003cspan class=\"p\"\u003e--\u003c/span\u003e \u003cspan class=\"n\"\u003esh\u003c/span\u003e \u003cspan class=\"n\"\u003e-c\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;ip a | grep inet\\ | grep -v 127.0.0\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eSplit\u003c/span\u003e\u003cspan class=\"p\"\u003e()[\u003c/span\u003e\u003cspan class=\"n\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e].\u003c/span\u003e\u003cspan class=\"n\"\u003eSplit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;/\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e)[\u003c/span\u003e\u003cspan class=\"n\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"n\"\u003econnectport\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003e22\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003ePS \u003c/span\u003e\u003cspan class=\"n\"\u003eC:\u003c/span\u003e\u003cspan class=\"p\"\u003e\\\u003c/span\u003e\u003cspan class=\"n\"\u003eWINDOWS\u003c/span\u003e\u003cspan class=\"p\"\u003e\\\u003c/span\u003e\u003cspan class=\"n\"\u003esystem32\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enetsh\u003c/span\u003e \u003cspan class=\"n\"\u003eadvfirewall\u003c/span\u003e \u003cspan class=\"n\"\u003efirewall\u003c/span\u003e \u003cspan class=\"n\"\u003eadd\u003c/span\u003e \u003cspan class=\"n\"\u003erule\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;Open Port 2222 for WSL2\u0026#34;\u003c/span\u003e \u003cspan class=\"n\"\u003edir\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003eaction\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eallow\u003c/span\u003e \u003cspan class=\"n\"\u003eprotocol\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003eTCP\u003c/span\u003e \u003cspan class=\"n\"\u003elocalport\u003c/span\u003e\u003cspan class=\"p\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003e2222\u003c/span\u003e\n\u003cspan class=\"n\"\u003eOk\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003ePS \u003c/span\u003e\u003cspan class=\"n\"\u003eC:\u003c/span\u003e\u003cspan class=\"p\"\u003e\\\u003c/span\u003e\u003cspan class=\"n\"\u003eWINDOWS\u003c/span\u003e\u003cspan class=\"p\"\u003e\\\u003c/span\u003e\u003cspan class=\"n\"\u003esystem32\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003enetsh\u003c/span\u003e \u003cspan class=\"n\"\u003einterface\u003c/span\u003e \u003cspan class=\"n\"\u003eportproxy\u003c/span\u003e \u003cspan class=\"n\"\u003eshow\u003c/span\u003e \u003cspan class=\"n\"\u003ev4tov4\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eListen\u003c/span\u003e \u003cspan class=\"n\"\u003eon\u003c/span\u003e \u003cspan class=\"n\"\u003eipv4\u003c/span\u003e\u003cspan class=\"err\"\u003e:\u003c/span\u003e             \u003cspan class=\"n\"\u003eConnect\u003c/span\u003e \u003cspan class=\"n\"\u003eto\u003c/span\u003e \u003cspan class=\"n\"\u003eipv4\u003c/span\u003e\u003cspan class=\"err\"\u003e:\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eAddress\u003c/span\u003e         \u003cspan class=\"n\"\u003ePort\u003c/span\u003e        \u003cspan class=\"n\"\u003eAddress\u003c/span\u003e         \u003cspan class=\"n\"\u003ePort\u003c/span\u003e\n\u003cspan class=\"p\"\u003e---------------\u003c/span\u003e \u003cspan class=\"p\"\u003e----------\u003c/span\u003e  \u003cspan class=\"p\"\u003e---------------\u003c/span\u003e \u003cspan class=\"p\"\u003e----------\u003c/span\u003e\n\u003cspan class=\"n\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e0\u003c/span\u003e         \u003cspan class=\"n\"\u003e2222\u003c/span\u003e        \u003cspan class=\"n\"\u003e172\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e23\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e21\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003e232\u003c/span\u003e   \u003cspan class=\"n\"\u003e22\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"github-cli-set-secrets\"\u003eGitHub CLI set secrets\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ grep oauth_token: \u0026lt; ~/.config/gh/hosts.yml | sed -e 's/.*oauth_token: //g' | gh secret set MY_TOKEN\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003e../secrets\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eSECRET_NAME secret value\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ while IFS= read -r line; do gh secret set -R github.com/intel/dffml \u0026quot;$(echo $line | sed -e 's/ .*//')\u0026quot; --body \u0026quot;$(echo $line | sed -e 's/[^ ]* //')\u0026quot;; done \u0026lt; ../secrets\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"return-repos-from-sourcegraph-query\"\u003eReturn repos from sourcegraph query\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ curl 'https://sourcegraph.com/search/stream?q=context%3Aglobal%20repo%3A%5Egithub%5C.com%2Forg-name%2F.*%20log4j%20\u0026amp;v=V2\u0026amp;t=literal\u0026amp;dl=0\u0026amp;dk=html\u0026amp;dc=1\u0026amp;display=1500' | tee /tmp/org-name\n$ python -c 'import sys, json, itertools; print(\u0026quot;\\n\u0026quot;.join(list(set(filter(bool, itertools.chain(*map(lambda data: list(map(lambda content: content.get(\u0026quot;repository\u0026quot;, \u0026quot;\u0026quot;), data)) if isinstance(data, list) else [], filter(bool, map(json.loads, map(lambda line: \u0026quot;{}\u0026quot; if not line.startswith(\u0026quot;data: \u0026quot;) else line.split(maxsplit=1)[-1], sys.stdin))))))))))' \u0026lt; /tmp/org-name\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"commit-one-file-at-a-time\"\u003eCommit one file at a time\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ git add $(git status --porcelain=2 | grep -v \\? | awk '{print $NF}' | head -n 1) \u0026amp;\u0026amp; git commit -sm \u0026quot;$(git status --porcelain=2 | grep -v \\? | awk '{print $NF}' | sed -e 's/dffml_source_mongodb\\///g' -e 's/examples\\/shouldi\\///g' -e 's/\\//: /g' -e 's/_/ /g' -e 's/\\.py//g' | head -n 1): Format with black\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"run-command-on-line-in-vim\"\u003eRun command on line in vim\u003c/h2\u003e\n\u003cp\u003eSource: \u003ca href=\"https://stackoverflow.com/questions/26809543/how-to-use-an-external-command-in-vim-to-modify-the-selection\"\u003ehttps://stackoverflow.com/questions/26809543/how-to-use-an-external-command-in-vim-to-modify-the-selection\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e'\u0026lt;,'\u0026gt; !python3 -c 'import sys, datetime; print(\u0026quot;\\n\u0026quot;.join([line_datetime[0].strip() for line_datetime in sorted([(line, datetime.datetime.strptime(line.split()[-1], \u0026quot;\\%Y-\\%m-\\%dT\\%H:\\%M:\\%SZ\u0026quot;)) for line in sys.stdin], key=lambda line_datetime: line_datetime[1])]))'\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode\u003eHow to use an external command in Vim to modify the selection\n\nSomething I've found useful in other editors is the ability to:\n\ntake the selected text\nrun an external command and pass the selection to its stdin\ntake the external commands stdout and replace the current selection with it.\nThis way you can write useful text tools which operate on the selection using any language that can do basic io.\n\nHow can this be done with vim?\n\n(Directly in the command line, or via a key binding?)\n\n---\n\n:'\u0026lt;,'\u0026gt;!command\n\n'\u0026lt;,'\u0026gt; represents the (linewise) visual selection and is automatically inserted when you hit : and have something selected.\n\nExample:\n\nIf you select a line containing:\n\nprint(\u0026quot;Hello!\u0026quot;)\n\nand run the Vim command:\n\n:'\u0026lt;,'\u0026gt;!python\n\nthe text will be replaced with Hello!.\n\nIf you want to set this to a key-binding (F5 to evaluate for example)\n\nvnoremap \u0026lt;F5\u0026gt; :!python\u0026lt;cr\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cul\u003e\n\u003cli\u003eExample vim session insert, put this text, then press Escape key and type: \u003ccode\u003e:'\u0026lt;,'\u0026gt; !bash\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003emkdir -p schema/image/container/build/\ncat \u0026gt; schema/image/container/build/README.md\u0026lt;\u0026lt;'EOF'\n# Container Image Build Manifest\nEOF\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eUse \u003ccode\u003etee\u003c/code\u003e to replace output with existing and save sections of a file to smaller files\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e:'\u0026lt;,'\u0026gt; !tee output.txt\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLine select and calculate hash\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ecurl -sfL https://download.fedoraproject.org/pub/fedora/linux/releases/36/Server/x86_64/iso/Fedora-Server-netinst-x86_64-36-1.5.iso | sha256sum -\n:'\u0026lt;,'\u0026gt; !bash\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFind replace multiple things at the same time\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e:'\u0026lt;,'\u0026gt; !sed -e 's/support/readme/g' -e 's/Support/Readme/g' -e 's/SUPPORT/README/g'\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"dump-github-comments-to-markdown-file\"\u003eDump GitHub comments to markdown file\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ gh issue view https://github.com/intel/dffml/issues/1279 --json comments | jq -r '.comments[].body' | tr -d '\\r' | sed -e 's/[[:space:]]*$//' -e 's/^#/\\n\\n#/g' | tee ~/comments.$(date \u0026quot;+%4Y-%m-%d-%H-%M\u0026quot;).md\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"print-the-date-in-a-yyyy-mm-dd-hh-ss-format\"\u003ePrint the date in a YYYY-MM-DD-HH-SS format\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ date \u0026quot;+%Y-%m-%d-%H-%M\u0026quot;\n2022-02-02-06-34\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"reproducible-archive-via-ssh\"\u003eReproducible archive via ssh\u003c/h2\u003e\n\u003cp\u003eSource: \u003ca href=\"https://reproducible-builds.org/docs/archives/\"\u003ehttps://reproducible-builds.org/docs/archives/\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ tar -C /some/dir/with/stuff -c --sort=name --mtime=\u0026quot;2015-10-21 00:00Z\u0026quot; --owner=0 --group=0 --numeric-owner --pax-option=exthdr.name=%d/PaxHeaders/%f,delete=atime,delete=ctime myfile.within.some.dir.with.stuff.exe | sshpass -p \u0026quot;$(python -m keyring get $USER password)\u0026quot; ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null \u0026quot;$USER@129.168.1.123\u0026quot; python -c '\nimport io\nimport os\nimport sys\nimport tarfile\nimport hashlib\nimport pathlib\nimport unittest\nimport tempfile\n\nartifacts_contents = sys.stdin.buffer.read()\n\nunittest.TestCase().assertEqual(\n    hashlib.sha256(artifacts_contents).hexdigest(),\n    \u0026quot;2bd972e3c980ee7dd376ca2c5988e2234d325d505f2124146abad226f1d163bb\u0026quot;,\n    \u0026quot;Artifact archive hash mismatch\u0026quot;,\n)\n\nwith tempfile.TemporaryDirectory() as tempdir:\n    os.chdir(tempdir)\n    with tarfile.open(fileobj=io.BytesIO(artifacts_contents), mode=\u0026quot;r\u0026quot;) as fileobj:\n        fileobj.extractall()\n        for path in pathlib.Path().rglob(\u0026quot;*\u0026quot;):\n            print(path.resolve())\n'\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"converting-datetimes-from-one-timezone-to-another-in-python\"\u003eConverting datetimes from one timezone to another in Python\u003c/h2\u003e\n\u003cp\u003eExample has local timezone as \u003ccode\u003e-08:00\u003c/code\u003e (PST).\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003edatetime\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003edatetime\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etimedelta\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etzinfo\u003c/span\u003e\n\u003cspan class=\"o\"\u003e\u0026gt;\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edatetime\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efromisoformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;2022-02-13T04:30\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003etimedelta\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehours\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e28\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eisoformat\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;-08:00\u0026#34;\u003c/span\u003e\n\u003cspan class=\"s1\"\u003e\u0026#39;2022-02-14T08:30:00-08:00\u0026#39;\u003c/span\u003e\n\u003cspan class=\"o\"\u003e\u0026gt;\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edatetime\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efromisoformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e\u0026#39;2022-02-13T04:30\u0026#39;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003etimedelta\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehours\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e28\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003etimedelta\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehours\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003etimedelta\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ehours\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eminutes\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e30\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eisoformat\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;+05:30\u0026#34;\u003c/span\u003e\n\u003cspan class=\"s1\"\u003e\u0026#39;2022-02-14T22:00:00+05:30\u0026#39;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"xz-compressed-asciinema-recording\"\u003eXZ compressed asciinema recording\u003c/h2\u003e\n\u003cp\u003eDotfiles: \u003ca href=\"https://github.com/johnandersen777/dotfiles/blob/cae7a366d7766bb1a82c478f0aedc6a829630677/.asciinema_source\"\u003ehttps://github.com/johnandersen777/dotfiles/blob/cae7a366d7766bb1a82c478f0aedc6a829630677/.asciinema_source\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eRecord (for remote: \u003ccode\u003essh -t hostname\u003c/code\u003e)\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ export REC_TITLE=\u0026quot;\u0026quot;; export REC_HOSTNAME=\u0026quot;$(hostname)\u0026quot;; python3.9 -m asciinema rec --idle-time-limit 0.5 --title \u0026quot;$(date -Iseconds): ${REC_HOSTNAME} ${REC_TITLE}\u0026quot; --command \u0026quot;sh -c 'tmux a || tmux'\u0026quot; \u0026gt;(xz --stdout - \u0026gt; \u0026quot;$HOME/asciinema/${REC_HOSTNAME}-rec-$(date -Iseconds).json.xz\u0026quot;)\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eCheck size\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003edu -h ~/Downloads/ascii*\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ePlayback\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003exz --stdout -d - \u0026lt; ~/Downloads/asci* | python -m asciinema play -s 20 -\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eUpload \u003cstrong\u003eTODO\u003c/strong\u003e title from recording first line, this is an example where (Alice shell / dataflows) parallel stream processing shines due to \u003ccode\u003etee \u0026gt;(export title=$(read))\u003c/code\u003e not being available for \u003ccode\u003e${title}\u003c/code\u003e in place of \u003ccode\u003easciinema\u003c/code\u003e with no-ghost bash. With ghost being with Alice, with these parallel / concurrent sub streams.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ asciinema upload $(ls ~/asciinema/rec-$(hostname)-*ndjson | tail -n 1)\n$ url=$(unxz -d \u0026lt; $(ls ~/asciinema/$(hostname)-* | tail -n 1) | python -m asciinema upload /dev/stdin 2\u0026gt;\u0026amp;1 | grep https | awk '{print $NF}'); echo \u0026quot;[![asciinema](${url}.svg)](${url})\u0026quot; | xclip -selection c\n$ unxz -d \u0026lt; $(ls ~/asciinema/$(hostname)-* | tail -n 1) | python -m asciinema upload /dev/stdin 2\u0026gt;\u0026amp;1 | grep https | awk '{print $NF}' | xclip -selection \n$ git diff | gh gist create -d $(unxz -d \u0026lt; $(ls ~/asciinema/$(hostname)-* | tail -n 1) | python -m asciinema upload /dev/stdin 2\u0026gt;\u0026amp;1 | grep https | awk '{print $NF}') -f with-rec.patch -\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"obs-studio\"\u003eOBS Studio\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://snoober.home.blog/\"\u003ehttps://snoober.home.blog/\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"wsl-ssh\"\u003ewsl ssh\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ wsl -u root -- mkdir -pv /run/sshd; wsl -u root -- /usr/sbin/sshd -D -o ListenAddress=0.0.0.0\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"parse-time-with-timezone\"\u003eParse time with timezone\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -c 'import sys, datetime; print(datetime.datetime.strptime(sys.argv[-1], \u0026quot;%d %b %Y %H:%M:%S %z\u0026quot;))' '11 Jan 2022 00:44:19 +0800'\n2022-01-11 00:44:19+08:00\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"date-command\"\u003edate command\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ date \u0026quot;+%4Y-%m-%d-%H-%M\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"file-transfer-with-progress\"\u003eFile transfer with progress\u003c/h2\u003e\n\u003cp\u003eMachine sending file.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ nc -Nlp 9999 \u0026lt; filename\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eMachine receiving file.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ dd status=progress bs=1M if=\u0026lt;(cat \u0026lt; /dev/tcp/example.com/9999) of=/mnt/c/Users/$USER/Downloads/filename\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"work-on-one-branch-and-make-change-on-other-branch-push-to-github-and-run-ci\"\u003eWork on one branch and make change on other branch push to github and run CI\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ nodemon -e yml --exec \u0026quot;clear; export branch=feedface; git branch -D $branch; git checkout upstream/main-test -b $branch; python -c 'print(\\\u0026quot;A\\\u0026quot; + (\\\u0026quot;R\\\u0026quot; * (2**8)))' \u0026gt; ahoy-there-matey-its-me-file; git add . \u0026amp;\u0026amp; git commit -sam \u0026quot;${branch}\u0026quot; \u0026amp;\u0026amp; git push -d origin \u0026quot;${branch}\u0026quot;; git push -fu origin $(git status | head -n 1 | awk '{print $NF}') \u0026amp;\u0026amp; gh pr create --base main-test --title \u0026quot;$branch\u0026quot; -F /dev/null\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"download-and-install-an-autotools-project-with-a-vendored-autoreconf--i\"\u003eDownload and install an autotools project with a vendored \u003ccode\u003eautoreconf -i\u003c/code\u003e\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ export tempdir=$(mktemp -d); (cd $tempdir \u0026amp;\u0026amp; curl -sfL 'https://www.kernel.org/pub/software/scm/git/git-2.36.0.tar.gz' | tar xz \u0026amp;\u0026amp; cd git* \u0026amp;\u0026amp; ./configure --prefix=$tempdir \u0026amp;\u0026amp; make -j $(($(nproc)*4)) \u0026amp;\u0026amp; ./git version \u0026amp;\u0026amp; echo $tempdir | tee /tmp/git_pwd \u0026amp;\u0026amp; sudo chmod a+rx -R $tempdir) \u0026amp;\u0026amp; sudo chmod a+r /tmp/git_pwd\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eA non autoconf project using \u003ca href=\"https://www.gnu.org/prep/standards/html_node/Directory-Variables.html#Directory-Variables\"\u003ehttps://www.gnu.org/prep/standards/html_node/Directory-Variables.html#Directory-Variables\u003c/a\u003e for\n\u003ccode\u003eprefix      ?= /usr/local\u003c/code\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ export tempdir=$(mktemp -d); (cd $tempdir \u0026amp;\u0026amp; curl -sfL https://github.com/stefanhaustein/TerminalImageViewer/archive/refs/tags/v1.1.1.tar.gz | tar xz \u0026amp;\u0026amp; cd Terminal*/src/main/cpp \u0026amp;\u0026amp; make -j $(($(nproc)*4)) \u0026amp;\u0026amp; make install prefix=$tempdir)\ninstall -D tiv /tmp/tmp.ONSIPt2W5E/bin/tiv\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"near-local-github-actions-debug\"\u003eNear local github actions debug\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ gh run rerun --failed $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')\n$ gh run watch --exit-status -i 1 $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')\n$ gh run view $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')\n$ gh run view --log $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003egh run view --log-failed $(gh run list --workflow feedface.yml | head -n 1| awk '{print $(NF-2)}')\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"find-the-binaries\"\u003eFind the binaries\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eTODO\u003c/strong\u003e CVE Bin Tool approach\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ file $(find $tempdir -name git)\n/tmp/tmp.2Wd0hLb8oN/bin/git:                                      ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=c1357c209d816a9738b0af78d017a6c2bfba71e7, with debug_info, not stripped\n/tmp/tmp.2Wd0hLb8oN/git-2.36.0/bin-wrappers/git:                  POSIX shell script, ASCII text executable\n/tmp/tmp.2Wd0hLb8oN/git-2.36.0/git:                               ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=c1357c209d816a9738b0af78d017a6c2bfba71e7, with debug_info, not stripped\n/tmp/tmp.2Wd0hLb8oN/git-2.36.0/contrib/mw-to-git/bin-wrapper/git: POSIX shell script, ASCII text executable\n/tmp/tmp.2Wd0hLb8oN/libexec/git-core/git:                         ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=c1357c209d816a9738b0af78d017a6c2bfba71e7, with debug_info, not stripped\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"unix-anyone-can-execute-and-read-anything-in-these-dirs\"\u003eUNIX anyone can execute and read anything in these dirs\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ chmod -R a+rx $dir\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"debugging-actions-self-hosted-runners\"\u003eDebugging actions self-hosted runners\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ gh run rerun --failed $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}') \u0026amp;\u0026amp; sleep 1 \u0026amp;\u0026amp; gh run watch --exit-status -i 1 $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}') || gh run view --log $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"used-the-menu-button-on-the-keyboard-for-the-first-time-ever-today\"\u003eUsed the menu button on the keyboard for the first time ever today\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://support.google.com/chrome/answer/10483214?hl=en\"\u003ehttps://support.google.com/chrome/answer/10483214?hl=en\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"edit-a-file-only-if-autoformatting-passes\"\u003eEdit a file only if autoformatting passes\u003c/h2\u003e\n\u003cp\u003eCan be used to hand edit xxd as well if you wanted to\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ cp old-admin.json old-old-admin.json; cp ~/.local/admin.json old-admin.json \u0026amp;\u0026amp; python -m json.tool old-admin.json \u0026gt; admin.json || cp old-admin.json admin.json \u0026amp;\u0026amp; cp admin.json staged.json \u0026amp;\u0026amp; vim staged.json \u0026amp;\u0026amp; python -m json.tool \u0026lt; staged.json \u0026gt; admin.json \u0026amp;\u0026amp; cp admin.json ~/.local/admin.json\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"quick-pop-shell-from-python\"\u003eQuick pop shell from python\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eos\u003c/span\u003e\n\u003cspan class=\"n\"\u003edirectory\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;/tmp\u0026#34;\u003c/span\u003e\n\u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esystem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;bash -c \u0026#39;cd {directory}; pwd; exec bash\u0026#39;\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"capture-output-of-shell-stderr-and-out-to-file-by-datestamp\"\u003eCapture output of shell stderr and out to file by datestamp\u003c/h2\u003e\n\u003cp\u003eCombine with bash history to create Alice herstory as fully connected view.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ nodemon -e py --exec 'clear; alice please contribute -log debug -repos https://github.com/johnandersen777/testa -- recommended community standards 2\u0026gt;\u0026amp;1 | tee .output/$(date +%4Y-%m-%d-%H-%M).txt; test 1'\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ grep -n -C 5 -i contribute_readme_md $(find .output/ | sort | tail -n 1)\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"python-reverse-lines-in-file\"\u003ePython reverse lines in file\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -c 'import sys; print(\u0026quot;\u0026quot;.join(list(filter(bool, sys.stdin))[::-1]))' \u0026lt; commits.txt | tee commits-ordered.txt\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"cherry-pick-the-last-two-commits\"\u003eCherry pick the last two commits\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ git cherry-pick branchname~2..branchname\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"print-git-log-with-links-to-commits-on-github\"\u003ePrint git log with links to commits on github\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ export remote=\u0026quot;$(git remote get-url $(git remote))\u0026quot; \u0026amp;\u0026amp; git log --pretty=oneline -n 2 | sed -e \u0026quot;s#^#${remote}/commit/#\u0026quot;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"you-can-drag-files-videos-even-right-into-a-markdown-document-to-uploda-them-to-github\"\u003eYou can drag files (videos even) right into a markdown document to uploda them to github\u003c/h2\u003e\n\u003ch2 id=\"download-a-python-package-with-curl-and-verify-the-contents-using-the-sha\"\u003eDownload a python package with curl and verify the contents using the SHA\u003c/h2\u003e\n\u003cp\u003eSometimes downloading a package with pip will fail.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ ulimit -c unlimited\n$ python -m pip download torch\nCollecting torch\n  Downloading torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl (776.4 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ 776.3/776.4 MB 13.0 MB/s eta 0:00:01Killed\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eLook for the path to the download you want.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ curl -sfL https://pypi.org/simple/torch/ | grep torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl\n    \u0026lt;a href=\u0026quot;https://files.pythonhosted.org/packages/1e/2f/06d30fbc76707f14641fe737f0715f601243e039d676be487d0340559c86/torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl#sha256=9b356aea223772cd754edb4d9ecf2a025909b8615a7668ac7d5130f86e7ec421\u0026quot; data-requires-python=\u0026quot;\u0026amp;gt;=3.7.0\u0026quot; \u0026gt;torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl\u0026lt;/a\u0026gt;\u0026lt;br /\u0026gt;\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eDownload the package.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ curl -fLOC - https://files.pythonhosted.org/packages/1e/2f/06d30fbc76707f14641fe737f0715f601243e039d676be487d0340559c86/torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100  740M  100  740M    0     0  85.1M      0  0:00:08  0:00:08 --:--:--  106M\n\nVerify the SHA appended to our downloaded URL from our initial command.\n\n```console\n$ sha256sum -c - \u0026lt;\u0026lt;\u0026lt;'9b356aea223772cd754edb4d9ecf2a025909b8615a7668ac7d5130f86e7ec421  torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl'\ntorch-1.12.1-cp39-cp39-manylinux1_x86_64.whl: OK\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eInstall the package\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -m pip install ./torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eNow it should appear to pip as installed\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -m pip install -U pip setuptools wheel\nDefaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: pip in /.pyenv/versions/3.9.13/lib/python3.9/site-packages (22.2.1)\nCollecting pip\n  Downloading pip-22.2.2-py3-none-any.whl (2.0 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 10.3 MB/s eta 0:00:00\nRequirement already satisfied: setuptools in /.pyenv/versions/3.9.13/lib/python3.9/site-packages (63.2.0)\nCollecting setuptools\n  Downloading setuptools-65.3.0-py3-none-any.whl (1.2 MB)\n     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 16.5 MB/s eta 0:00:00\nRequirement already satisfied: wheel in /.pyenv/versions/3.9.13/lib/python3.9/site-packages (0.37.1)\nInstalling collected packages: setuptools, pip\nSuccessfully installed pip-22.2.2 setuptools-65.3.0\n\n[notice] A new release of pip available: 22.2.1 -\u0026gt; 22.2.2\n[notice] To update, run: pip install --upgrade pip\n$ pip install torch==1.12.1\nDefaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: torch==1.12.1 in ./.local/lib/python3.9/site-packages (1.12.1)\nRequirement already satisfied: typing-extensions in ./.local/lib/python3.9/site-packages (from torch==1.12.1) (4.3.0)\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"read-markdown-in-terminal\"\u003eRead markdown in terminal\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003ecurl -sfL https://github.com/openai/whisper/raw/main/README.md | python -m rich.markdown /dev/stdin | less -r\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"windows-disable-taskbar-icon-blinking\"\u003eWindows disable taskbar icon blinking\u003c/h2\u003e\n\u003cp\u003eSource: \u003ca href=\"https://answers.microsoft.com/en-us/msteams/forum/all/how-to-stop-teams-from-blinking-in-taskbars-when/decc661a-7c4a-4f7e-a729-afdee2f14824\"\u003ehttps://answers.microsoft.com/en-us/msteams/forum/all/how-to-stop-teams-from-blinking-in-taskbars-when/decc661a-7c4a-4f7e-a729-afdee2f14824\u003c/a\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eRudy (can't fail): Please edit the value of ForegroundFlashCount from the HKEY_CURRENT_USER\\Control Panel\\Desktop registry to the value of 1, then the icon will flash once. Which can reduce the number of icon flashing. Note: Setting to 0 will make the icon continuously flash. If you still need to stop Teams' icon flash, for this Windows OS related question, we will move this thread back to the original category. Meanwhile, if you don't want to use Teams client, actually, you can let it run in background via selecting the \u0026quot;Open application in background\u0026quot; options in Settings \u0026gt; General.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"display-date-with-timezone\"\u003eDisplay date with timezone\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ date -Iseconds\n2022-10-05T22:30:42-07:00\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"reboot-to-bios\"\u003eReboot to BIOS\u003c/h2\u003e\n\u003cp\u003eSource: \u003ca href=\"https://twitter.com/ADurrante/status/1578052630043140101?s=20\u0026amp;t=Ypq4nyTINjL_gPctxvvN1A\"\u003ehttps://twitter.com/ADurrante/status/1578052630043140101?s=20\u0026amp;t=Ypq4nyTINjL_gPctxvvN1A\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ shutdown /r /fw /f /t 0\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"git-push-to-current-branch\"\u003eGit push to current branch\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ git push -u origin $(git branch | grep -E '^\\*' | sed -e 's/\\* //')\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"ssh-port-forward-remote-port-to-enable-connection-via-local-port-to-port-on-remote-server\"\u003e\u003ccode\u003essh\u003c/code\u003e port forward remote port to enable connection via local port to port on remote server\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ ssh -nNT -L 8000::8000 target\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"ssh-port-forward-local-port-to-enable-connection-to-port-on-remote-server-to-access-local-port\"\u003e\u003ccode\u003essh\u003c/code\u003e port forward local port to enable connection to port on remote server to access local port\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ ssh -nNT -R 127.0.0.1:6000:0.0.0.0:6000 target\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eEnsure \u003ccode\u003eGatewayPorts\u003c/code\u003e is \u003ccode\u003eyes\u003c/code\u003e server side\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e/etc/ssh/sshd_config\u003c/strong\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eAllowTcpForwarding yes\nGatewayPorts yes\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"json-to-yaml-with-python-cli\"\u003eJSON to YAML with Python CLI\u003c/h2\u003e\n\u003cp\u003eSource: \u003ca href=\"https://github.com/intel/dffml/blob/8847989eb4cc9f6aa484285ba9c11ff920113ed3/docs/arch/0008-Manifest.md\"\u003ehttps://github.com/intel/dffml/blob/8847989eb4cc9f6aa484285ba9c11ff920113ed3/docs/arch/0008-Manifest.md\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -c \u0026quot;import sys, pathlib, json, yaml; print(yaml.dump(json.load(sys.stdin)))\u0026quot; \u0026lt; manifest.json\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"yaml-to-json-with-python-cli\"\u003eYAML to JSON with Python CLI\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -c \u0026quot;import sys, pathlib, json, yaml; print(json.dumps(yaml.safe_load(sys.stdin.read())))\u0026quot; \u0026lt; manifest.json\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"post-wip-diff-to-pull-request\"\u003ePost WIP diff to Pull Request\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ (echo '```diff' \u0026amp;\u0026amp; git diff \u0026amp;\u0026amp; echo '```') | gh pr comment -F -\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"mirror-site-with-wget\"\u003eMirror site with wget\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSource: \u003ca href=\"https://handyman.dulare.com/advanced-wget-website-mirroring/\"\u003ehttps://handyman.dulare.com/advanced-wget-website-mirroring/\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ wget --mirror --convert-links --adjust-extension --page-requisites  http://www.mywebsite.com/\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"remove-bullshit-docker-images\"\u003eRemove bullshit docker images\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ docker rm $(docker ps -qa)\n$ docker rmi $(docker images | grep \\\u0026lt;none\\\u0026gt; | awk '{print $3}')\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"print-all-lines-and-variables-in-a-python-file-as-it-executes\"\u003ePrint all lines and variables in a Python file as it executes\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/alexmojaki/snoop\"\u003ehttps://github.com/alexmojaki/snoop\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -m pip install snoop\n$ sed -e 's/import os/import snoop\\n\u0026amp;/g' -e 's/def main/@snoop\\n\u0026amp;/g' ~/dffml/.github/actions/create_manifest_instance_build_images_containers/images_containers_manifest.py\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"remap-fields-with-jq\"\u003eRemap fields with jq\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/fadado/JBOL/blob/master/doc/JQ-Distilled.md\"\u003ehttps://github.com/fadado/JBOL/blob/master/doc/JQ-Distilled.md\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/fadado/JBOL\"\u003ehttps://github.com/fadado/JBOL\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ echo '{\u0026quot;mykey\u0026quot;: {\u0026quot;a\u0026quot;: 42}}' | jq 'to_entries[] | {(.key): {\u0026quot;alice\u0026quot;: (.value.\u0026quot;a\u0026quot;)}}' | jq -s 'add'\n{\n  \u0026quot;mykey\u0026quot;: {\n    \u0026quot;alice\u0026quot;: 42\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"blocklist-with-jq\"\u003eBlocklist with jq\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ cat inputs.txt | jq --argjson blocklist \u0026quot;$(cat blocklist.txt | jq -cnR '[inputs | select(length\u0026gt;0) | sub(\u0026quot;\\\\*.*\u0026quot;;\u0026quot;\u0026quot;) | sub(\u0026quot;@.*\u0026quot;;\u0026quot;\u0026quot;)]')\u0026quot; -nR '[inputs | select( . as $in | $blocklist | index($in) | not)]'\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"ssh-through-socks-proxy-with-netcat\"\u003eSSH through socks proxy with netcat\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://superuser.com/questions/454210/how-can-i-use-ssh-with-a-socks-5-proxy\"\u003ehttps://superuser.com/questions/454210/how-can-i-use-ssh-with-a-socks-5-proxy\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ ssh -R 80:localhost:8080 -o ProxyCommand=\u0026quot;nc -X 5 -x 127.0.0.1:6000 %h %p\u0026quot; nokey@localhost.run\n\u003c/code\u003e\u003c/pre\u003e\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ ssh -nT -R 80:localhost:8080 nokey@localhost.run 2\u0026gt;/dev/null | grep --line-buffered 'tunneled with tls' | python -c 'import sys; print(sys.stdin.readline().split()[-1])' | tee public-url.txt \u0026amp;\n\u003c/code\u003e\u003c/pre\u003e\u003ch2 id=\"curl-and-powershell-to-python\"\u003eCurl and PowerShell to Python\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003esys\u003c/span\u003e\u003cspan class=\"o\"\u003e,\u003c/span\u003e \u003cspan class=\"nn\"\u003ehttp.server\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eserver\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBaseHTTPRequestHandler\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edo_POST\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003elambda\u003c/span\u003e \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e[\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esend_response\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e200\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esend_header\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;Content-type\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;text/plain\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esend_header\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;Content-length\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eend_headers\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n        \u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewfile\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewrite\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"sa\"\u003eb\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;OK\u003c/span\u003e\u003cspan class=\"se\"\u003e\\n\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esys\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estdout\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebuffer\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ewrite\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eself\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erfile\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eread\u003c/span\u003e\u003cspan class=\"p\"\u003e()),\u003c/span\u003e\n        \u003cspan class=\"n\"\u003esys\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eexit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eserver\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eHTTPServer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;0.0.0.0\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e8080\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eserver\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eBaseHTTPRequestHandler\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eserve_forever\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ python -uc 'import sys, http.server; http.server.BaseHTTPRequestHandler.do_POST = (lambda self: list([self.send_response(200), self.send_header(\u0026quot;Content-type\u0026quot;, \u0026quot;text/plain\u0026quot;), self.send_header(\u0026quot;Content-length\u0026quot;, 3), self.end_headers(), self.wfile.write(b\u0026quot;OK\\n\u0026quot;), sys.stdout.buffer.write(self.rfile.read()), sys.exit(0)])); http.server.HTTPServer((\u0026quot;0.0.0.0\u0026quot;, 8080), http.server.BaseHTTPRequestHandler).serve_forever()' | python -um json.tool | tee data.json\n\u003c/code\u003e\u003c/pre\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003ecurl -X POST -d @file.ext http://localhost:8080/\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan class=\"nv\"\u003e$body\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003eGet-Content\u003c/span\u003e \u003cspan class=\"n\"\u003e-Path\u003c/span\u003e \u003cspan class=\"n\"\u003edata\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ejson\u003c/span\u003e \u003cspan class=\"n\"\u003e-Encoding\u003c/span\u003e \u003cspan class=\"n\"\u003eUTF8\u003c/span\u003e \u003cspan class=\"n\"\u003e-Raw\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eInvoke-WebRequest\u003c/span\u003e \u003cspan class=\"n\"\u003e-Uri\u003c/span\u003e \u003cspan class=\"n\"\u003ehttp\u003c/span\u003e\u003cspan class=\"err\"\u003e:\u003c/span\u003e\u003cspan class=\"p\"\u003e//\u003c/span\u003e\u003cspan class=\"n\"\u003elocalhost\u003c/span\u003e\u003cspan class=\"err\"\u003e:\u003c/span\u003e\u003cspan class=\"n\"\u003e8080\u003c/span\u003e\u003cspan class=\"p\"\u003e/\u003c/span\u003e \u003cspan class=\"n\"\u003e-Method\u003c/span\u003e \u003cspan class=\"n\"\u003ePOST\u003c/span\u003e \u003cspan class=\"n\"\u003e-Body\u003c/span\u003e \u003cspan class=\"nv\"\u003e$body\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"digital-ocean\"\u003eDigital Ocean\u003c/h2\u003e\n\u003cp\u003eI ❤️ DigitalOcean 🐳\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/tmux/tmux/wiki/Advanced-Use#piping-pane-changes\"\u003ehttps://github.com/tmux/tmux/wiki/Advanced-Use#piping-pane-changes\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://dokku.com/docs/getting-started/install/digitalocean/\"\u003ehttps://dokku.com/docs/getting-started/install/digitalocean/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"create-a-docker-droplet\"\u003eCreate a Docker Droplet\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eCOMPUTE_DOMAIN\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003echadig.com \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eCOMPUTE_SUBDOMAIN\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003escitt.eve \u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eCOMPUTE_NAME\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003escitt-eve\n\ndoctl compute ssh-key import \u003cspan class=\"k\"\u003e$(\u003c/span\u003ehostname\u003cspan class=\"k\"\u003e)\u003c/span\u003e --public-key-file \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eHOME\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e/.ssh/id_rsa.pub\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"o\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eset\u003c/span\u003e -xu \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e doctl compute droplet create --ssh-keys \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"k\"\u003e$(\u003c/span\u003essh-keygen -l -E md5 -f ~/.ssh/id_rsa.pub \u003cspan class=\"p\"\u003e|\u003c/span\u003e awk \u003cspan class=\"s1\"\u003e\u0026#39;{print $2}\u0026#39;\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e sed -e \u003cspan class=\"s1\"\u003e\u0026#39;s/MD5://1\u0026#39;\u003c/span\u003e\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e --image \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"k\"\u003e$(\u003c/span\u003edoctl compute image list-distribution --no-header --format Slug \u003cspan class=\"p\"\u003e|\u003c/span\u003e grep fedora \u003cspan class=\"p\"\u003e|\u003c/span\u003e tail -n 1\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e --size \u003cspan class=\"k\"\u003e$(\u003c/span\u003edoctl compute size list --no-header --format Slug \u003cspan class=\"p\"\u003e|\u003c/span\u003e head -n \u003cspan class=\"m\"\u003e2\u003c/span\u003e \u003cspan class=\"p\"\u003e|\u003c/span\u003e tail -n 1\u003cspan class=\"k\"\u003e)\u003c/span\u003e --region sfo3 --droplet-agent\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nb\"\u003etrue\u003c/span\u003e --tag-name scitt \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_NAME\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003etime\u003c/span\u003e bash -xeuo pipefail -c \u003cspan class=\"s1\"\u003e\u0026#39;STATUS=new; while [[ \u0026#34;x${STATUS}\u0026#34; = \u0026#34;xnew\u0026#34; ]]; do STATUS=$(doctl compute droplet get --no-header --format Status ${COMPUTE_NAME}); done\u0026#39;\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eCOMPUTE_IPV4\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e \u003cspan class=\"o\"\u003e[[\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;x\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_IPV4\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;x\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e]]\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e \u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eCOMPUTE_IPV4\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$(\u003c/span\u003edoctl compute droplet list --no-header --format PublicIPv4 \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_NAME\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"k\"\u003e)\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003edone\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e doctl compute domain records create --record-name \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_SUBDOMAIN\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e --record-ttl \u003cspan class=\"m\"\u003e3600\u003c/span\u003e --record-type A --record-data \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_IPV4\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_DOMAIN\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"k\"\u003ewhile\u003c/span\u003e ! ssh -i \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eHOME\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e/.ssh/id_rsa.pub\u0026#34;\u003c/span\u003e -o \u003cspan class=\"nv\"\u003eStrictHostKeyChecking\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eno \u003cspan class=\"s2\"\u003e\u0026#34;root@\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_IPV4\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;set -x \u0026amp;\u0026amp; dnf -y install git tmux python3 python3-pip \u0026amp;\u0026amp; tmux new-session -d -s http_server \u0026#39;python -m http.server 80\u0026#39;\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e sleep 1\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003edone\u003c/span\u003e\u003cspan class=\"o\"\u003e)\u003c/span\u003e\n\ndoctl compute droplet delete --force \u003cspan class=\"k\"\u003e$(\u003c/span\u003edoctl compute droplet get --no-header --format ID \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_NAME\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"k\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"nb\"\u003eexport\u003c/span\u003e \u003cspan class=\"nv\"\u003eCOMPUTE_IPV4\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"k\"\u003e$(\u003c/span\u003edoctl compute droplet list --no-header --format PublicIPv4 \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_NAME\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"k\"\u003e)\u003c/span\u003e\nssh -t -i \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eHOME\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e/.ssh/id_rsa.pub\u0026#34;\u003c/span\u003e -o \u003cspan class=\"nv\"\u003eStrictHostKeyChecking\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003eno \u003cspan class=\"s2\"\u003e\u0026#34;root@\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eCOMPUTE_IPV4\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e \u003cspan class=\"s2\"\u003e\u0026#34;tmux a\u0026#34;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"tar\"\u003etar\u003c/h2\u003e\n\u003ch3 id=\"extract-single-file-or-set-of-files\"\u003eExtract single file or set of files\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"language-console\" data-lang=\"console\"\u003e$ tar -xzv --to-stdout --wildcards --no-anchored 'path/from/root/*.ext'\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003ca href=\"https://asciinema.org/a/620287\"\u003e\u003cimg src=\"https://asciinema.org/a/620287.svg\" alt=\"asciicast\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"bash\"\u003eBash\u003c/h2\u003e\n\u003ch3 id=\"arrays\"\u003eArrays\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre class=\"chroma\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan class=\"cp\"\u003e#!/usr/bin/env bash\n\u003c/span\u003e\u003cspan class=\"cp\"\u003e\u003c/span\u003e\u003cspan class=\"c1\"\u003e# Bash Array Example\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# @lice: Write a python sphinx extension which transforms source code in bash,\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# python, and javascript, with plugins for more languages for source AST to\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# docutils class instances. Create a demo for it using this file as an example\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# source file to build to using the new plugin. Output in HTML.\u003c/span\u003e\n\u003cspan class=\"nb\"\u003eset\u003c/span\u003e -exuo pipefail\n\n\u003cspan class=\"nb\"\u003edeclare\u003c/span\u003e -a \u003cspan class=\"nv\"\u003eexample_array\u003c/span\u003e\u003cspan class=\"o\"\u003e=()\u003c/span\u003e\n\nexample_array\u003cspan class=\"o\"\u003e[\u003c/span\u003e\u003cspan class=\"si\"\u003e${#\u003c/span\u003e\u003cspan class=\"nv\"\u003eexample_array\u003c/span\u003e\u003cspan class=\"p\"\u003e[@]\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"o\"\u003e]=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;Value for example_array index 0\u0026#34;\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003efor\u003c/span\u003e value in \u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"si\"\u003e${\u003c/span\u003e\u003cspan class=\"nv\"\u003eexample_array\u003c/span\u003e\u003cspan class=\"p\"\u003e[@]\u003c/span\u003e\u003cspan class=\"si\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e\u0026#34;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"k\"\u003edo\u003c/span\u003e\n  \u003cspan class=\"nb\"\u003eecho\u003c/span\u003e \u003cspan class=\"nv\"\u003e$value\u003c/span\u003e\n\u003cspan class=\"k\"\u003edone\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\"ffmpeg\"\u003effmpeg\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://johnandersen777.github.io/ffmpeg/\"\u003ehttps://johnandersen777.github.io/ffmpeg/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e"}</script><link rel=preload as=script href="/bundle.js?v=1729715610"><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://stats.g.doubleclick.net><link rel=preconnect href=https://www.googleadservices.com><link rel=preload as=script href="https://www.googletagmanager.com/gtag/js?id=UA-160259978-2"><script src="https://www.googletagmanager.com/gtag/js?id=UA-160259978-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-160259978-2');</script></head><body><header id=nav class=header><div class="ax-l-i max-w-6xl"><div class=ax-logo><a class=block href=/ title="johnandersen777's blog"><img src=/images/avatar2x.png alt="johnandersen777's blog"></a></div><div class=ax-user><a class="p-2 w-8 h-8 block text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" target=_blank rel="noopener nofollow" href="https://www.google.com/search?q=site:johnandersen777.github.io" title=Search><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.67 12.804c0-5.6 4.544-10.134 10.133-10.134s10.134 4.544 10.134 10.134-4.544 10.133-10.134 10.133S2.67 18.393 2.67 12.804zm28.943 16.923-8.868-8.868c4.287-5.3 3.68-13.012-1.378-17.57S8.564-1.066 3.75 3.75s-5.017 12.558-.46 17.618 12.28 5.665 17.57 1.378l8.868 8.868a1.33 1.33.0 002.231-.597c.123-.46-.008-.952-.345-1.29h0z"/></svg></a><a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href=/posts/>Posts</a>
<a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href=/about/>About</a>
<a class="p-2 block text-base leading-none text-raven-500 hover:text-gray-800 focus:text-gray-800 focus:outline-none" href=/a_guide_to_good/>💊</a></div></div></header><main><div class=default-single><div class="ax-title ax-l-o"><div class="ax-l-i max-w-680"><h1 class="post-title font-content-title font-normal leading-tight tracking-default text-40">Time Saving Tricks and Hacks</h1><div class="ax-meta flex items-center mt-5"><div class="flex-grow min-w-0"><div class="flex items-center"><div class=flex-shrink-0><img class="w-12 h-12 sm:w-14 sm:h-14 object-cover p-05 rounded-full border border-blue-300" src=/images/avatar@2x.png alt="John Andersen"></div><div class="flex-shrink-0 ml-2 leading-tight font-content-sans"><a class="block text-sm text-raven-800 hover:text-raven-900 hover:underline focus:underline" target=_blank rel="noopener nofollow" title="John Andersen" href=https://johnandersen777.github.io/>John Andersen</a>
<time class="text-sm text-raven-500" datetime=2020-07-07T19:00:00Z>Jul 7, 2020 7:00PM</time></div></div></div><div><div class="flex items-center"><a class="flex-shrink-0 block text-raven-800 hover:text-raven-900" target=_blank rel="noopener nofollow" title="Share on Twitter" href="https://twitter.com/intent/tweet?text=Time%20Saving%20Tricks%20and%20Hacks%20by%20%40johnandersen777%20https%3a%2f%2fjohnandersen777.github.io%2ftricks%2f"><svg class="w-6 h-6 fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M32 6.078c-1.2.522-2.458.868-3.78 1.036 1.36-.812 2.398-2.088 2.886-3.626a13.11 13.11.0 01-4.16 1.588C25.742 3.794 24.026 3 22.154 3a6.56 6.56.0 00-6.556 6.562c0 .52.044 1.02.152 1.496-5.454-.266-10.28-2.88-13.522-6.862-.566.982-.898 2.106-.898 3.316a6.57 6.57.0 002.914 5.452 6.48 6.48.0 01-2.964-.808v.072c0 3.188 2.274 5.836 5.256 6.446-.534.146-1.116.216-1.72.216-.42.0-.844-.024-1.242-.112.85 2.598 3.262 4.508 6.13 4.57a13.18 13.18.0 01-8.134 2.798c-.538.0-1.054-.024-1.57-.1C2.906 27.93 6.35 29 10.064 29c12.072.0 18.672-10 18.672-18.668.0-.3-.01-.57-.024-.848C30.014 8.56 31.108 7.406 32 6.078z"/></svg></a><a class="ml-3 flex-shrink-0 block text-raven-800 hover:text-raven-900" target=_blank rel="noopener nofollow" title="Share on Facebook" href="https://www.facebook.com/dialog/share?app_id=&display=page&href=https%3a%2f%2fjohnandersen777.github.io%2ftricks%2f"><svg class="w-6 h-6 fill-current" viewBox="-7 -3.5 39 39" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M30.234.0H1.765C.8.001.0.79.0 1.766v28.47C.001 31.2.79 32 1.766 32h15.328V19.625h-4.156V14.78h4.156v-3.564c0-4.134 2.523-6.384 6.21-6.384 1.766.0 3.284.13 3.726.2v4.32h-2.543c-2.006.0-2.394.953-2.394 2.352v3.085h4.797l-.625 4.844h-4.172V32h8.14C31.21 32 32 31.2 32 30.234V1.765C32 .8 31.21.0 30.234.0z"/></svg></a></div></div></div></div></div><div class="ax-content ax-l-o"><div class="ax-l-i max-w-680"><article class=cdata><h2 id=dos2unix-in-python>dos2unix in Python</h2><p>Remove carriage returns from CRLF (carriage return, line feed: <code>\r\n</code>).</p><pre><code class=language-console data-lang=console>$ python -c 'import pathlib, sys; p = pathlib.Path(sys.argv[-1]); p.write_bytes(p.read_bytes().replace(b&quot;\r&quot;, b&quot;&quot;))' file.txt
</code></pre><h2 id=get-list-of-available-versions>Get list of available versions</h2><pre><code class=language-console data-lang=console>$ python -m pip install dffml==
</code></pre><h2 id=download-file-with-python-from-command-line-with-progress>Download file with Python from command line with progress</h2><pre><code class=language-console data-lang=console>$ python3 -c 'import sys, functools, urllib.request; print(urllib.request.urlretrieve(sys.argv[-1], reporthook=lambda n, c, t: print(f&quot;{round(((n*c)/t) * 100, 2)}%&quot;, end=&quot;\r&quot;, file=sys.stderr))[0])' https://storage.googleapis.com/laurencemoroney-blog.appspot.com/rps.zip
</code></pre><p><a href=https://asciinema.org/a/357044><img src=https://asciinema.org/a/357044.svg alt=asciicast></a></p><h2 id=display-only-blocks-of-text-with-certain-text-in-them>Display only blocks of text with certain text in them</h2><p>Use grep to displays blocks of text. Only display blocks with certain text
inside them.</p><pre><code class=language-console data-lang=console>$ git grep -A 25 -E 'dffml train|dffml accuracy|dffml predict' | python -c 'import sys; print(&quot;--&quot;.join([i for i in sys.stdin.read().split(&quot;--&quot;) if not &quot;model-directory&quot; in i]).strip())'
</code></pre><h2 id=display-a-file-as-plain-text-in-a-browser>Display a file as plain text in a browser</h2><pre><code class=language-console data-lang=console>$ (echo -e 'HTTP/1.0 200 OK\n' &amp;&amp; cat myfile.txt) | nc -Nlp 8000
</code></pre><p>If you have <code>socat</code> that's better, as chrome sometimes requests the favicon then netcat closes the listening socket. <code>socat</code> will serve multiple connections.</p><pre><code class=language-console data-lang=console>$ (echo -e 'HTTP 1.0\n200 OK\n' &amp;&amp; cat myfile.txt | tee /dev/stderr | socat - TCP-LISTEN:8000,fork,reuseaddr
</code></pre><p>Redisplay on reload.</p><ul><li><code>-N</code> to netcat mean close socket on EOF from STDIN</li></ul><pre><code class=language-console data-lang=console>$ nodemon -e md --exec &quot;clear; while test 1; do (echo -e 'HTTP/1.0 200 OK\n' &amp;&amp; cat open-architecture.md) | nc -Nlp 8000; sleep 0.5; done; test 1&quot;
</code></pre><h2 id=do-a-vim-commands-on-files-in-an-automated-way>Do a vim commands on files in an automated way</h2><p>Remove all newlines from end of file</p><pre><code class=language-console data-lang=console>$ for file in $(echo examples/notebooks/*.ipynb); do vim -b '+set noeol' '+wq' $file; done
</code></pre><h2 id=open-a-list-of-files-in-tmux-panes>Open a list of files in tmux panes</h2><ul><li><a href=https://github.com/tmux/tmux/wiki/Advanced-Use>https://github.com/tmux/tmux/wiki/Advanced-Use</a></li></ul><pre><code class=language-console data-lang=console>$ for file in $(git ls-files | grep -E '.*\.cpp|.*\.h|.*\.ino'); do tmux split-window -h &quot;vim ${file}&quot;; tmux next-layout; done
</code></pre><p><a href=https://asciinema.org/a/441107><img src=https://asciinema.org/a/441107.svg alt=asciicast></a></p><h2 id=close-all-but-the-active-tmux-pane>Close all but the active tmux pane</h2><pre><code class=language-console data-lang=console>$  for pane in $(tmux list-pane | grep -v active | sed -e 's/:.*//g'); do export pane=$(tmux list-pane | grep -v active | sed -e 's/:.*//g' | head -n 1); tmux kill-pane -t $pane ; done
</code></pre><h2 id=scrape-page-for-links>Scrape page for links</h2><pre><code class=language-console data-lang=console>$ curl -sfL &quot;https://pypi.org/simple/dffml/&quot; | python -u -c 'import sys, json, bs4; print(json.dumps({link.get_text(): link.get(&quot;href&quot;) for link in bs4.BeautifulSoup(sys.stdin.read(), &quot;html.parser&quot;).find_all(&quot;a&quot;)}))' | python -m json.tool
{
    &quot;dffml-0.4.0.post0-py3-none-any.whl&quot;: &quot;https://files.pythonhosted.org/packages/37/d5/6dc945d453cbdeb15db4249fe09e07bdd2e750a6f256fd893c81ced7bbbb/dffml-0.4.0.post0-py3-none-any.whl#sha256=031dd3a4ca57d46f568f7dd2711a223a26bc343f5f2ac36e1af881ead19e05b6&quot;,
    &quot;dffml-0.4.0.post0.tar.gz&quot;: &quot;https://files.pythonhosted.org/packages/b0/42/a151555fe3b45926fa041813f8513d883180bdb9e8def64d2d5260609743/dffml-0.4.0.post0.tar.gz#sha256=f6f898c504450e3514dd5791b31bcba21ad9edfc3e896ac5da9cbe3181af5d2b&quot;
}
</code></pre><h2 id=sign-and-verify-data-using-ssh-keys>Sign and verify data using ssh keys</h2><p>References:</p><ul><li><a href=https://www.agwa.name/blog/post/ssh_signatures>https://www.agwa.name/blog/post/ssh_signatures</a></li></ul><pre><code class=language-console data-lang=console>$ podman run -v $HOME/.ssh/:/root/.ssh:ro -v $PWD:/usr/src/workdir -w /usr/src/workdir --rm -ti --entrypoint ssh-keygen lscr.io/linuxserver/openssh-server -Y sign -f /root/.ssh/mykeyname -n file CHANGELOG.md
$ (printf 'alice@example.com ' &amp;&amp; cat ~/.ssh/mykeyname.pub) | tee allowed_signers
$ cat CHANGELOG.md | podman run -v $HOME/.ssh/:/root/.ssh:ro -v $PWD:/usr/src/workdir -w /usr/src/workdir --rm -i --entrypoint ssh-keygen lscr.io/linuxserver/openssh-server -Y verify -f allowed_signers -I alice@example.com -n file -s CHANGELOG.md.sig
Good &quot;file&quot; signature for alice@example.com with RSA key SHA256:RQsUY/opy5KWg+pesXcjI9I3I1z8udgkFAlOjDrv8cw
</code></pre><h2 id=git-stash-show-patch>git stash show patch</h2><p>Shows just applied patch</p><pre><code class=language-console data-lang=console>$ git stash show -p
</code></pre><h2 id=wsl-start-sshd>wsl start sshd</h2><p>From powershell:</p><pre><code class=language-console data-lang=console>$ Start-Job -ScriptBlock{wsl -u root -e mkdir -pv /run/sshd ; wsl -u root -e /usr/sbin/sshd -D}
</code></pre><h2 id=wsl-forward-port>WSL Forward Port</h2><p>Run the following from an Administrator PowerShell session</p><div class=highlight><pre class=chroma><code class=language-powershell data-lang=powershell><span class=nb>PS </span><span class=n>C:</span><span class=p>\</span><span class=n>WINDOWS</span><span class=p>\</span><span class=n>system32</span><span class=p>&gt;</span> <span class=n>netsh</span> <span class=n>interface</span> <span class=n>portproxy</span> <span class=n>add</span> <span class=n>v4tov4</span> <span class=n>listenaddress</span><span class=p>=</span><span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=p>.</span><span class=n>0</span> <span class=n>listenport</span><span class=p>=</span><span class=n>2222</span> <span class=n>connectaddress</span><span class=p>=((</span><span class=n>wsl</span> <span class=n>-u</span> <span class=n>root</span> <span class=p>--</span> <span class=n>sh</span> <span class=n>-c</span> <span class=s2>&#34;ip a | grep inet\ | grep -v 127.0.0&#34;</span><span class=p>).</span><span class=n>Split</span><span class=p>()[</span><span class=n>5</span><span class=p>].</span><span class=n>Split</span><span class=p>(</span><span class=s2>&#34;/&#34;</span><span class=p>)[</span><span class=n>0</span><span class=p>])</span> <span class=n>connectport</span><span class=p>=</span><span class=n>22</span>

<span class=nb>PS </span><span class=n>C:</span><span class=p>\</span><span class=n>WINDOWS</span><span class=p>\</span><span class=n>system32</span><span class=p>&gt;</span> <span class=n>netsh</span> <span class=n>advfirewall</span> <span class=n>firewall</span> <span class=n>add</span> <span class=n>rule</span> <span class=n>name</span><span class=p>=</span><span class=s2>&#34;Open Port 2222 for WSL2&#34;</span> <span class=n>dir</span><span class=p>=</span><span class=k>in</span> <span class=n>action</span><span class=p>=</span><span class=n>allow</span> <span class=n>protocol</span><span class=p>=</span><span class=n>TCP</span> <span class=n>localport</span><span class=p>=</span><span class=n>2222</span>
<span class=n>Ok</span><span class=p>.</span>

<span class=nb>PS </span><span class=n>C:</span><span class=p>\</span><span class=n>WINDOWS</span><span class=p>\</span><span class=n>system32</span><span class=p>&gt;</span> <span class=n>netsh</span> <span class=n>interface</span> <span class=n>portproxy</span> <span class=n>show</span> <span class=n>v4tov4</span>

<span class=n>Listen</span> <span class=n>on</span> <span class=n>ipv4</span><span class=err>:</span>             <span class=n>Connect</span> <span class=n>to</span> <span class=n>ipv4</span><span class=err>:</span>

<span class=n>Address</span>         <span class=n>Port</span>        <span class=n>Address</span>         <span class=n>Port</span>
<span class=p>---------------</span> <span class=p>----------</span>  <span class=p>---------------</span> <span class=p>----------</span>
<span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=p>.</span><span class=n>0</span><span class=p>.</span><span class=n>0</span>         <span class=n>2222</span>        <span class=n>172</span><span class=p>.</span><span class=n>23</span><span class=p>.</span><span class=n>21</span><span class=p>.</span><span class=n>232</span>   <span class=n>22</span>
</code></pre></div><h2 id=github-cli-set-secrets>GitHub CLI set secrets</h2><pre><code class=language-console data-lang=console>$ grep oauth_token: &lt; ~/.config/gh/hosts.yml | sed -e 's/.*oauth_token: //g' | gh secret set MY_TOKEN
</code></pre><p><strong>../secrets</strong></p><pre><code>SECRET_NAME secret value
</code></pre><pre><code class=language-console data-lang=console>$ while IFS= read -r line; do gh secret set -R github.com/intel/dffml &quot;$(echo $line | sed -e 's/ .*//')&quot; --body &quot;$(echo $line | sed -e 's/[^ ]* //')&quot;; done &lt; ../secrets
</code></pre><h2 id=return-repos-from-sourcegraph-query>Return repos from sourcegraph query</h2><pre><code class=language-console data-lang=console>$ curl 'https://sourcegraph.com/search/stream?q=context%3Aglobal%20repo%3A%5Egithub%5C.com%2Forg-name%2F.*%20log4j%20&amp;v=V2&amp;t=literal&amp;dl=0&amp;dk=html&amp;dc=1&amp;display=1500' | tee /tmp/org-name
$ python -c 'import sys, json, itertools; print(&quot;\n&quot;.join(list(set(filter(bool, itertools.chain(*map(lambda data: list(map(lambda content: content.get(&quot;repository&quot;, &quot;&quot;), data)) if isinstance(data, list) else [], filter(bool, map(json.loads, map(lambda line: &quot;{}&quot; if not line.startswith(&quot;data: &quot;) else line.split(maxsplit=1)[-1], sys.stdin))))))))))' &lt; /tmp/org-name
</code></pre><h2 id=commit-one-file-at-a-time>Commit one file at a time</h2><pre><code class=language-console data-lang=console>$ git add $(git status --porcelain=2 | grep -v \? | awk '{print $NF}' | head -n 1) &amp;&amp; git commit -sm &quot;$(git status --porcelain=2 | grep -v \? | awk '{print $NF}' | sed -e 's/dffml_source_mongodb\///g' -e 's/examples\/shouldi\///g' -e 's/\//: /g' -e 's/_/ /g' -e 's/\.py//g' | head -n 1): Format with black&quot;
</code></pre><h2 id=run-command-on-line-in-vim>Run command on line in vim</h2><p>Source: <a href=https://stackoverflow.com/questions/26809543/how-to-use-an-external-command-in-vim-to-modify-the-selection>https://stackoverflow.com/questions/26809543/how-to-use-an-external-command-in-vim-to-modify-the-selection</a></p><pre><code>'&lt;,'&gt; !python3 -c 'import sys, datetime; print(&quot;\n&quot;.join([line_datetime[0].strip() for line_datetime in sorted([(line, datetime.datetime.strptime(line.split()[-1], &quot;\%Y-\%m-\%dT\%H:\%M:\%SZ&quot;)) for line in sys.stdin], key=lambda line_datetime: line_datetime[1])]))'
</code></pre><pre><code>How to use an external command in Vim to modify the selection

Something I've found useful in other editors is the ability to:

take the selected text
run an external command and pass the selection to its stdin
take the external commands stdout and replace the current selection with it.
This way you can write useful text tools which operate on the selection using any language that can do basic io.

How can this be done with vim?

(Directly in the command line, or via a key binding?)

---

:'&lt;,'&gt;!command

'&lt;,'&gt; represents the (linewise) visual selection and is automatically inserted when you hit : and have something selected.

Example:

If you select a line containing:

print(&quot;Hello!&quot;)

and run the Vim command:

:'&lt;,'&gt;!python

the text will be replaced with Hello!.

If you want to set this to a key-binding (F5 to evaluate for example)

vnoremap &lt;F5&gt; :!python&lt;cr&gt;
</code></pre><ul><li>Example vim session insert, put this text, then press Escape key and type: <code>:'&lt;,'> !bash</code></li></ul><pre><code>mkdir -p schema/image/container/build/
cat &gt; schema/image/container/build/README.md&lt;&lt;'EOF'
# Container Image Build Manifest
EOF
</code></pre><p>Use <code>tee</code> to replace output with existing and save sections of a file to smaller files</p><pre><code>:'&lt;,'&gt; !tee output.txt
</code></pre><p>Line select and calculate hash</p><pre><code>curl -sfL https://download.fedoraproject.org/pub/fedora/linux/releases/36/Server/x86_64/iso/Fedora-Server-netinst-x86_64-36-1.5.iso | sha256sum -
:'&lt;,'&gt; !bash
</code></pre><p>Find replace multiple things at the same time</p><pre><code>:'&lt;,'&gt; !sed -e 's/support/readme/g' -e 's/Support/Readme/g' -e 's/SUPPORT/README/g'
</code></pre><h2 id=dump-github-comments-to-markdown-file>Dump GitHub comments to markdown file</h2><pre><code class=language-console data-lang=console>$ gh issue view https://github.com/intel/dffml/issues/1279 --json comments | jq -r '.comments[].body' | tr -d '\r' | sed -e 's/[[:space:]]*$//' -e 's/^#/\n\n#/g' | tee ~/comments.$(date &quot;+%4Y-%m-%d-%H-%M&quot;).md
</code></pre><h2 id=print-the-date-in-a-yyyy-mm-dd-hh-ss-format>Print the date in a YYYY-MM-DD-HH-SS format</h2><pre><code class=language-console data-lang=console>$ date &quot;+%Y-%m-%d-%H-%M&quot;
2022-02-02-06-34
</code></pre><h2 id=reproducible-archive-via-ssh>Reproducible archive via ssh</h2><p>Source: <a href=https://reproducible-builds.org/docs/archives/>https://reproducible-builds.org/docs/archives/</a></p><pre><code class=language-console data-lang=console>$ tar -C /some/dir/with/stuff -c --sort=name --mtime=&quot;2015-10-21 00:00Z&quot; --owner=0 --group=0 --numeric-owner --pax-option=exthdr.name=%d/PaxHeaders/%f,delete=atime,delete=ctime myfile.within.some.dir.with.stuff.exe | sshpass -p &quot;$(python -m keyring get $USER password)&quot; ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null &quot;$USER@129.168.1.123&quot; python -c '
import io
import os
import sys
import tarfile
import hashlib
import pathlib
import unittest
import tempfile

artifacts_contents = sys.stdin.buffer.read()

unittest.TestCase().assertEqual(
    hashlib.sha256(artifacts_contents).hexdigest(),
    &quot;2bd972e3c980ee7dd376ca2c5988e2234d325d505f2124146abad226f1d163bb&quot;,
    &quot;Artifact archive hash mismatch&quot;,
)

with tempfile.TemporaryDirectory() as tempdir:
    os.chdir(tempdir)
    with tarfile.open(fileobj=io.BytesIO(artifacts_contents), mode=&quot;r&quot;) as fileobj:
        fileobj.extractall()
        for path in pathlib.Path().rglob(&quot;*&quot;):
            print(path.resolve())
'
</code></pre><h2 id=converting-datetimes-from-one-timezone-to-another-in-python>Converting datetimes from one timezone to another in Python</h2><p>Example has local timezone as <code>-08:00</code> (PST).</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=o>&gt;&gt;&gt;</span> <span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span><span class=p>,</span> <span class=n>timedelta</span><span class=p>,</span> <span class=n>tzinfo</span>
<span class=o>&gt;&gt;&gt;</span> <span class=p>(</span><span class=n>datetime</span><span class=o>.</span><span class=n>fromisoformat</span><span class=p>(</span><span class=s1>&#39;2022-02-13T04:30&#39;</span><span class=p>)</span> <span class=o>+</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>28</span><span class=p>))</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span> <span class=o>+</span> <span class=s2>&#34;-08:00&#34;</span>
<span class=s1>&#39;2022-02-14T08:30:00-08:00&#39;</span>
<span class=o>&gt;&gt;&gt;</span> <span class=p>(</span><span class=n>datetime</span><span class=o>.</span><span class=n>fromisoformat</span><span class=p>(</span><span class=s1>&#39;2022-02-13T04:30&#39;</span><span class=p>)</span> <span class=o>+</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>28</span><span class=p>)</span> <span class=o>+</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>8</span><span class=p>)</span> <span class=o>+</span> <span class=n>timedelta</span><span class=p>(</span><span class=n>hours</span><span class=o>=</span><span class=mi>5</span><span class=p>,</span> <span class=n>minutes</span><span class=o>=</span><span class=mi>30</span><span class=p>))</span><span class=o>.</span><span class=n>isoformat</span><span class=p>()</span> <span class=o>+</span> <span class=s2>&#34;+05:30&#34;</span>
<span class=s1>&#39;2022-02-14T22:00:00+05:30&#39;</span>
</code></pre></div><h2 id=xz-compressed-asciinema-recording>XZ compressed asciinema recording</h2><p>Dotfiles: <a href=https://github.com/johnandersen777/dotfiles/blob/cae7a366d7766bb1a82c478f0aedc6a829630677/.asciinema_source>https://github.com/johnandersen777/dotfiles/blob/cae7a366d7766bb1a82c478f0aedc6a829630677/.asciinema_source</a></p><p>Record (for remote: <code>ssh -t hostname</code>)</p><pre><code class=language-console data-lang=console>$ export REC_TITLE=&quot;&quot;; export REC_HOSTNAME=&quot;$(hostname)&quot;; python3.9 -m asciinema rec --idle-time-limit 0.5 --title &quot;$(date -Iseconds): ${REC_HOSTNAME} ${REC_TITLE}&quot; --command &quot;sh -c 'tmux a || tmux'&quot; &gt;(xz --stdout - &gt; &quot;$HOME/asciinema/${REC_HOSTNAME}-rec-$(date -Iseconds).json.xz&quot;)
</code></pre><p>Check size</p><pre><code class=language-console data-lang=console>du -h ~/Downloads/ascii*
</code></pre><p>Playback</p><pre><code class=language-console data-lang=console>xz --stdout -d - &lt; ~/Downloads/asci* | python -m asciinema play -s 20 -
</code></pre><p>Upload <strong>TODO</strong> title from recording first line, this is an example where (Alice shell / dataflows) parallel stream processing shines due to <code>tee >(export title=$(read))</code> not being available for <code>${title}</code> in place of <code>asciinema</code> with no-ghost bash. With ghost being with Alice, with these parallel / concurrent sub streams.</p><pre><code class=language-console data-lang=console>$ asciinema upload $(ls ~/asciinema/rec-$(hostname)-*ndjson | tail -n 1)
$ url=$(unxz -d &lt; $(ls ~/asciinema/$(hostname)-* | tail -n 1) | python -m asciinema upload /dev/stdin 2&gt;&amp;1 | grep https | awk '{print $NF}'); echo &quot;[![asciinema](${url}.svg)](${url})&quot; | xclip -selection c
$ unxz -d &lt; $(ls ~/asciinema/$(hostname)-* | tail -n 1) | python -m asciinema upload /dev/stdin 2&gt;&amp;1 | grep https | awk '{print $NF}' | xclip -selection 
$ git diff | gh gist create -d $(unxz -d &lt; $(ls ~/asciinema/$(hostname)-* | tail -n 1) | python -m asciinema upload /dev/stdin 2&gt;&amp;1 | grep https | awk '{print $NF}') -f with-rec.patch -
</code></pre><h2 id=obs-studio>OBS Studio</h2><p><a href=https://snoober.home.blog/>https://snoober.home.blog/</a></p><h2 id=wsl-ssh>wsl ssh</h2><pre><code class=language-console data-lang=console>$ wsl -u root -- mkdir -pv /run/sshd; wsl -u root -- /usr/sbin/sshd -D -o ListenAddress=0.0.0.0
</code></pre><h2 id=parse-time-with-timezone>Parse time with timezone</h2><pre><code class=language-console data-lang=console>$ python -c 'import sys, datetime; print(datetime.datetime.strptime(sys.argv[-1], &quot;%d %b %Y %H:%M:%S %z&quot;))' '11 Jan 2022 00:44:19 +0800'
2022-01-11 00:44:19+08:00
</code></pre><h2 id=date-command>date command</h2><pre><code class=language-console data-lang=console>$ date &quot;+%4Y-%m-%d-%H-%M&quot;
</code></pre><h2 id=file-transfer-with-progress>File transfer with progress</h2><p>Machine sending file.</p><pre><code class=language-console data-lang=console>$ nc -Nlp 9999 &lt; filename
</code></pre><p>Machine receiving file.</p><pre><code class=language-console data-lang=console>$ dd status=progress bs=1M if=&lt;(cat &lt; /dev/tcp/example.com/9999) of=/mnt/c/Users/$USER/Downloads/filename
</code></pre><h2 id=work-on-one-branch-and-make-change-on-other-branch-push-to-github-and-run-ci>Work on one branch and make change on other branch push to github and run CI</h2><pre><code class=language-console data-lang=console>$ nodemon -e yml --exec &quot;clear; export branch=feedface; git branch -D $branch; git checkout upstream/main-test -b $branch; python -c 'print(\&quot;A\&quot; + (\&quot;R\&quot; * (2**8)))' &gt; ahoy-there-matey-its-me-file; git add . &amp;&amp; git commit -sam &quot;${branch}&quot; &amp;&amp; git push -d origin &quot;${branch}&quot;; git push -fu origin $(git status | head -n 1 | awk '{print $NF}') &amp;&amp; gh pr create --base main-test --title &quot;$branch&quot; -F /dev/null&quot;
</code></pre><h2 id=download-and-install-an-autotools-project-with-a-vendored-autoreconf--i>Download and install an autotools project with a vendored <code>autoreconf -i</code></h2><pre><code class=language-console data-lang=console>$ export tempdir=$(mktemp -d); (cd $tempdir &amp;&amp; curl -sfL 'https://www.kernel.org/pub/software/scm/git/git-2.36.0.tar.gz' | tar xz &amp;&amp; cd git* &amp;&amp; ./configure --prefix=$tempdir &amp;&amp; make -j $(($(nproc)*4)) &amp;&amp; ./git version &amp;&amp; echo $tempdir | tee /tmp/git_pwd &amp;&amp; sudo chmod a+rx -R $tempdir) &amp;&amp; sudo chmod a+r /tmp/git_pwd
</code></pre><p>A non autoconf project using <a href=https://www.gnu.org/prep/standards/html_node/Directory-Variables.html#Directory-Variables>https://www.gnu.org/prep/standards/html_node/Directory-Variables.html#Directory-Variables</a> for
<code>prefix ?= /usr/local</code></p><pre><code class=language-console data-lang=console>$ export tempdir=$(mktemp -d); (cd $tempdir &amp;&amp; curl -sfL https://github.com/stefanhaustein/TerminalImageViewer/archive/refs/tags/v1.1.1.tar.gz | tar xz &amp;&amp; cd Terminal*/src/main/cpp &amp;&amp; make -j $(($(nproc)*4)) &amp;&amp; make install prefix=$tempdir)
install -D tiv /tmp/tmp.ONSIPt2W5E/bin/tiv
</code></pre><h2 id=near-local-github-actions-debug>Near local github actions debug</h2><pre><code class=language-console data-lang=console>$ gh run rerun --failed $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')
$ gh run watch --exit-status -i 1 $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')
$ gh run view $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')
$ gh run view --log $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')
</code></pre><pre><code class=language-console data-lang=console>gh run view --log-failed $(gh run list --workflow feedface.yml | head -n 1| awk '{print $(NF-2)}')
</code></pre><h2 id=find-the-binaries>Find the binaries</h2><p><strong>TODO</strong> CVE Bin Tool approach</p><pre><code class=language-console data-lang=console>$ file $(find $tempdir -name git)
/tmp/tmp.2Wd0hLb8oN/bin/git:                                      ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=c1357c209d816a9738b0af78d017a6c2bfba71e7, with debug_info, not stripped
/tmp/tmp.2Wd0hLb8oN/git-2.36.0/bin-wrappers/git:                  POSIX shell script, ASCII text executable
/tmp/tmp.2Wd0hLb8oN/git-2.36.0/git:                               ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=c1357c209d816a9738b0af78d017a6c2bfba71e7, with debug_info, not stripped
/tmp/tmp.2Wd0hLb8oN/git-2.36.0/contrib/mw-to-git/bin-wrapper/git: POSIX shell script, ASCII text executable
/tmp/tmp.2Wd0hLb8oN/libexec/git-core/git:                         ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 3.2.0, BuildID[sha1]=c1357c209d816a9738b0af78d017a6c2bfba71e7, with debug_info, not stripped
</code></pre><h2 id=unix-anyone-can-execute-and-read-anything-in-these-dirs>UNIX anyone can execute and read anything in these dirs</h2><pre><code class=language-console data-lang=console>$ chmod -R a+rx $dir
</code></pre><h2 id=debugging-actions-self-hosted-runners>Debugging actions self-hosted runners</h2><pre><code class=language-console data-lang=console>$ gh run rerun --failed $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}') &amp;&amp; sleep 1 &amp;&amp; gh run watch --exit-status -i 1 $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}') || gh run view --log $(gh run list | head -n 2 | tail -n 1 | awk '{print $(NF-2)}')
</code></pre><h2 id=used-the-menu-button-on-the-keyboard-for-the-first-time-ever-today>Used the menu button on the keyboard for the first time ever today</h2><p><a href="https://support.google.com/chrome/answer/10483214?hl=en">https://support.google.com/chrome/answer/10483214?hl=en</a></p><h2 id=edit-a-file-only-if-autoformatting-passes>Edit a file only if autoformatting passes</h2><p>Can be used to hand edit xxd as well if you wanted to</p><pre><code class=language-console data-lang=console>$ cp old-admin.json old-old-admin.json; cp ~/.local/admin.json old-admin.json &amp;&amp; python -m json.tool old-admin.json &gt; admin.json || cp old-admin.json admin.json &amp;&amp; cp admin.json staged.json &amp;&amp; vim staged.json &amp;&amp; python -m json.tool &lt; staged.json &gt; admin.json &amp;&amp; cp admin.json ~/.local/admin.json
</code></pre><h2 id=quick-pop-shell-from-python>Quick pop shell from python</h2><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>os</span>
<span class=n>directory</span> <span class=o>=</span> <span class=s2>&#34;/tmp&#34;</span>
<span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=n>f</span><span class=s2>&#34;bash -c &#39;cd {directory}; pwd; exec bash&#39;&#34;</span><span class=p>)</span>
</code></pre></div><h2 id=capture-output-of-shell-stderr-and-out-to-file-by-datestamp>Capture output of shell stderr and out to file by datestamp</h2><p>Combine with bash history to create Alice herstory as fully connected view.</p><pre><code class=language-console data-lang=console>$ nodemon -e py --exec 'clear; alice please contribute -log debug -repos https://github.com/johnandersen777/testa -- recommended community standards 2&gt;&amp;1 | tee .output/$(date +%4Y-%m-%d-%H-%M).txt; test 1'
</code></pre><pre><code class=language-console data-lang=console>$ grep -n -C 5 -i contribute_readme_md $(find .output/ | sort | tail -n 1)
</code></pre><h2 id=python-reverse-lines-in-file>Python reverse lines in file</h2><pre><code class=language-console data-lang=console>$ python -c 'import sys; print(&quot;&quot;.join(list(filter(bool, sys.stdin))[::-1]))' &lt; commits.txt | tee commits-ordered.txt
</code></pre><h2 id=cherry-pick-the-last-two-commits>Cherry pick the last two commits</h2><pre><code class=language-console data-lang=console>$ git cherry-pick branchname~2..branchname
</code></pre><h2 id=print-git-log-with-links-to-commits-on-github>Print git log with links to commits on github</h2><pre><code class=language-console data-lang=console>$ export remote=&quot;$(git remote get-url $(git remote))&quot; &amp;&amp; git log --pretty=oneline -n 2 | sed -e &quot;s#^#${remote}/commit/#&quot;
</code></pre><h2 id=you-can-drag-files-videos-even-right-into-a-markdown-document-to-uploda-them-to-github>You can drag files (videos even) right into a markdown document to uploda them to github</h2><h2 id=download-a-python-package-with-curl-and-verify-the-contents-using-the-sha>Download a python package with curl and verify the contents using the SHA</h2><p>Sometimes downloading a package with pip will fail.</p><pre><code class=language-console data-lang=console>$ ulimit -c unlimited
$ python -m pip download torch
Collecting torch
  Downloading torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl (776.4 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╸ 776.3/776.4 MB 13.0 MB/s eta 0:00:01Killed
</code></pre><p>Look for the path to the download you want.</p><pre><code class=language-console data-lang=console>$ curl -sfL https://pypi.org/simple/torch/ | grep torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl
    &lt;a href=&quot;https://files.pythonhosted.org/packages/1e/2f/06d30fbc76707f14641fe737f0715f601243e039d676be487d0340559c86/torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl#sha256=9b356aea223772cd754edb4d9ecf2a025909b8615a7668ac7d5130f86e7ec421&quot; data-requires-python=&quot;&amp;gt;=3.7.0&quot; &gt;torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl&lt;/a&gt;&lt;br /&gt;
</code></pre><p>Download the package.</p><pre><code class=language-console data-lang=console>$ curl -fLOC - https://files.pythonhosted.org/packages/1e/2f/06d30fbc76707f14641fe737f0715f601243e039d676be487d0340559c86/torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  740M  100  740M    0     0  85.1M      0  0:00:08  0:00:08 --:--:--  106M

Verify the SHA appended to our downloaded URL from our initial command.

```console
$ sha256sum -c - &lt;&lt;&lt;'9b356aea223772cd754edb4d9ecf2a025909b8615a7668ac7d5130f86e7ec421  torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl'
torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl: OK
</code></pre><p>Install the package</p><pre><code class=language-console data-lang=console>$ python -m pip install ./torch-1.12.1-cp39-cp39-manylinux1_x86_64.whl
</code></pre><p>Now it should appear to pip as installed</p><pre><code class=language-console data-lang=console>$ python -m pip install -U pip setuptools wheel
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: pip in /.pyenv/versions/3.9.13/lib/python3.9/site-packages (22.2.1)
Collecting pip
  Downloading pip-22.2.2-py3-none-any.whl (2.0 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 10.3 MB/s eta 0:00:00
Requirement already satisfied: setuptools in /.pyenv/versions/3.9.13/lib/python3.9/site-packages (63.2.0)
Collecting setuptools
  Downloading setuptools-65.3.0-py3-none-any.whl (1.2 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.2/1.2 MB 16.5 MB/s eta 0:00:00
Requirement already satisfied: wheel in /.pyenv/versions/3.9.13/lib/python3.9/site-packages (0.37.1)
Installing collected packages: setuptools, pip
Successfully installed pip-22.2.2 setuptools-65.3.0

[notice] A new release of pip available: 22.2.1 -&gt; 22.2.2
[notice] To update, run: pip install --upgrade pip
$ pip install torch==1.12.1
Defaulting to user installation because normal site-packages is not writeable
Requirement already satisfied: torch==1.12.1 in ./.local/lib/python3.9/site-packages (1.12.1)
Requirement already satisfied: typing-extensions in ./.local/lib/python3.9/site-packages (from torch==1.12.1) (4.3.0)
</code></pre><h2 id=read-markdown-in-terminal>Read markdown in terminal</h2><pre><code class=language-console data-lang=console>curl -sfL https://github.com/openai/whisper/raw/main/README.md | python -m rich.markdown /dev/stdin | less -r
</code></pre><h2 id=windows-disable-taskbar-icon-blinking>Windows disable taskbar icon blinking</h2><p>Source: <a href=https://answers.microsoft.com/en-us/msteams/forum/all/how-to-stop-teams-from-blinking-in-taskbars-when/decc661a-7c4a-4f7e-a729-afdee2f14824>https://answers.microsoft.com/en-us/msteams/forum/all/how-to-stop-teams-from-blinking-in-taskbars-when/decc661a-7c4a-4f7e-a729-afdee2f14824</a></p><blockquote><p>Rudy (can't fail): Please edit the value of ForegroundFlashCount from the HKEY_CURRENT_USER\Control Panel\Desktop registry to the value of 1, then the icon will flash once. Which can reduce the number of icon flashing. Note: Setting to 0 will make the icon continuously flash. If you still need to stop Teams' icon flash, for this Windows OS related question, we will move this thread back to the original category. Meanwhile, if you don't want to use Teams client, actually, you can let it run in background via selecting the "Open application in background" options in Settings > General.</p></blockquote><h2 id=display-date-with-timezone>Display date with timezone</h2><pre><code class=language-console data-lang=console>$ date -Iseconds
2022-10-05T22:30:42-07:00
</code></pre><h2 id=reboot-to-bios>Reboot to BIOS</h2><p>Source: <a href="https://twitter.com/ADurrante/status/1578052630043140101?s=20&t=Ypq4nyTINjL_gPctxvvN1A">https://twitter.com/ADurrante/status/1578052630043140101?s=20&t=Ypq4nyTINjL_gPctxvvN1A</a></p><pre><code class=language-console data-lang=console>$ shutdown /r /fw /f /t 0
</code></pre><h2 id=git-push-to-current-branch>Git push to current branch</h2><pre><code class=language-console data-lang=console>$ git push -u origin $(git branch | grep -E '^\*' | sed -e 's/\* //')
</code></pre><h2 id=ssh-port-forward-remote-port-to-enable-connection-via-local-port-to-port-on-remote-server><code>ssh</code> port forward remote port to enable connection via local port to port on remote server</h2><pre><code class=language-console data-lang=console>$ ssh -nNT -L 8000::8000 target
</code></pre><h2 id=ssh-port-forward-local-port-to-enable-connection-to-port-on-remote-server-to-access-local-port><code>ssh</code> port forward local port to enable connection to port on remote server to access local port</h2><pre><code class=language-console data-lang=console>$ ssh -nNT -R 127.0.0.1:6000:0.0.0.0:6000 target
</code></pre><p>Ensure <code>GatewayPorts</code> is <code>yes</code> server side</p><p><strong>/etc/ssh/sshd_config</strong></p><pre><code>AllowTcpForwarding yes
GatewayPorts yes
</code></pre><h2 id=json-to-yaml-with-python-cli>JSON to YAML with Python CLI</h2><p>Source: <a href=https://github.com/intel/dffml/blob/8847989eb4cc9f6aa484285ba9c11ff920113ed3/docs/arch/0008-Manifest.md>https://github.com/intel/dffml/blob/8847989eb4cc9f6aa484285ba9c11ff920113ed3/docs/arch/0008-Manifest.md</a></p><pre><code class=language-console data-lang=console>$ python -c &quot;import sys, pathlib, json, yaml; print(yaml.dump(json.load(sys.stdin)))&quot; &lt; manifest.json
</code></pre><h2 id=yaml-to-json-with-python-cli>YAML to JSON with Python CLI</h2><pre><code class=language-console data-lang=console>$ python -c &quot;import sys, pathlib, json, yaml; print(json.dumps(yaml.safe_load(sys.stdin.read())))&quot; &lt; manifest.json
</code></pre><h2 id=post-wip-diff-to-pull-request>Post WIP diff to Pull Request</h2><pre><code class=language-console data-lang=console>$ (echo '```diff' &amp;&amp; git diff &amp;&amp; echo '```') | gh pr comment -F -
</code></pre><h2 id=mirror-site-with-wget>Mirror site with wget</h2><blockquote><p>Source: <a href=https://handyman.dulare.com/advanced-wget-website-mirroring/>https://handyman.dulare.com/advanced-wget-website-mirroring/</a></p></blockquote><pre><code class=language-console data-lang=console>$ wget --mirror --convert-links --adjust-extension --page-requisites  http://www.mywebsite.com/
</code></pre><h2 id=remove-bullshit-docker-images>Remove bullshit docker images</h2><pre><code class=language-console data-lang=console>$ docker rm $(docker ps -qa)
$ docker rmi $(docker images | grep \&lt;none\&gt; | awk '{print $3}')
</code></pre><h2 id=print-all-lines-and-variables-in-a-python-file-as-it-executes>Print all lines and variables in a Python file as it executes</h2><p><a href=https://github.com/alexmojaki/snoop>https://github.com/alexmojaki/snoop</a></p><pre><code class=language-console data-lang=console>$ python -m pip install snoop
$ sed -e 's/import os/import snoop\n&amp;/g' -e 's/def main/@snoop\n&amp;/g' ~/dffml/.github/actions/create_manifest_instance_build_images_containers/images_containers_manifest.py
</code></pre><h2 id=remap-fields-with-jq>Remap fields with jq</h2><ul><li><a href=https://github.com/fadado/JBOL/blob/master/doc/JQ-Distilled.md>https://github.com/fadado/JBOL/blob/master/doc/JQ-Distilled.md</a></li><li><a href=https://github.com/fadado/JBOL>https://github.com/fadado/JBOL</a></li></ul><pre><code class=language-console data-lang=console>$ echo '{&quot;mykey&quot;: {&quot;a&quot;: 42}}' | jq 'to_entries[] | {(.key): {&quot;alice&quot;: (.value.&quot;a&quot;)}}' | jq -s 'add'
{
  &quot;mykey&quot;: {
    &quot;alice&quot;: 42
  }
}
</code></pre><h3 id=blocklist-with-jq>Blocklist with jq</h3><pre><code class=language-console data-lang=console>$ cat inputs.txt | jq --argjson blocklist &quot;$(cat blocklist.txt | jq -cnR '[inputs | select(length&gt;0) | sub(&quot;\\*.*&quot;;&quot;&quot;) | sub(&quot;@.*&quot;;&quot;&quot;)]')&quot; -nR '[inputs | select( . as $in | $blocklist | index($in) | not)]'
</code></pre><h2 id=ssh-through-socks-proxy-with-netcat>SSH through socks proxy with netcat</h2><ul><li><a href=https://superuser.com/questions/454210/how-can-i-use-ssh-with-a-socks-5-proxy>https://superuser.com/questions/454210/how-can-i-use-ssh-with-a-socks-5-proxy</a></li></ul><pre><code class=language-console data-lang=console>$ ssh -R 80:localhost:8080 -o ProxyCommand=&quot;nc -X 5 -x 127.0.0.1:6000 %h %p&quot; nokey@localhost.run
</code></pre><pre><code class=language-console data-lang=console>$ ssh -nT -R 80:localhost:8080 nokey@localhost.run 2&gt;/dev/null | grep --line-buffered 'tunneled with tls' | python -c 'import sys; print(sys.stdin.readline().split()[-1])' | tee public-url.txt &amp;
</code></pre><h2 id=curl-and-powershell-to-python>Curl and PowerShell to Python</h2><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=kn>import</span> <span class=nn>sys</span><span class=o>,</span> <span class=nn>http.server</span>

<span class=n>http</span><span class=o>.</span><span class=n>server</span><span class=o>.</span><span class=n>BaseHTTPRequestHandler</span><span class=o>.</span><span class=n>do_POST</span> <span class=o>=</span> <span class=k>lambda</span> <span class=bp>self</span><span class=p>:</span> <span class=nb>list</span><span class=p>(</span>
    <span class=p>[</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>send_response</span><span class=p>(</span><span class=mi>200</span><span class=p>),</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>send_header</span><span class=p>(</span><span class=s2>&#34;Content-type&#34;</span><span class=p>,</span> <span class=s2>&#34;text/plain&#34;</span><span class=p>),</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>send_header</span><span class=p>(</span><span class=s2>&#34;Content-length&#34;</span><span class=p>,</span> <span class=mi>3</span><span class=p>),</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>end_headers</span><span class=p>(),</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>wfile</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>b</span><span class=s2>&#34;OK</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>),</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>stdout</span><span class=o>.</span><span class=n>buffer</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>rfile</span><span class=o>.</span><span class=n>read</span><span class=p>()),</span>
        <span class=n>sys</span><span class=o>.</span><span class=n>exit</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span>
    <span class=p>]</span>
<span class=p>)</span>
<span class=n>http</span><span class=o>.</span><span class=n>server</span><span class=o>.</span><span class=n>HTTPServer</span><span class=p>(</span>
    <span class=p>(</span><span class=s2>&#34;0.0.0.0&#34;</span><span class=p>,</span> <span class=mi>8080</span><span class=p>),</span> <span class=n>http</span><span class=o>.</span><span class=n>server</span><span class=o>.</span><span class=n>BaseHTTPRequestHandler</span>
<span class=p>)</span><span class=o>.</span><span class=n>serve_forever</span><span class=p>()</span>
</code></pre></div><pre><code class=language-console data-lang=console>$ python -uc 'import sys, http.server; http.server.BaseHTTPRequestHandler.do_POST = (lambda self: list([self.send_response(200), self.send_header(&quot;Content-type&quot;, &quot;text/plain&quot;), self.send_header(&quot;Content-length&quot;, 3), self.end_headers(), self.wfile.write(b&quot;OK\n&quot;), sys.stdout.buffer.write(self.rfile.read()), sys.exit(0)])); http.server.HTTPServer((&quot;0.0.0.0&quot;, 8080), http.server.BaseHTTPRequestHandler).serve_forever()' | python -um json.tool | tee data.json
</code></pre><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>curl -X POST -d @file.ext http://localhost:8080/
</code></pre></div><div class=highlight><pre class=chroma><code class=language-powershell data-lang=powershell><span class=nv>$body</span> <span class=p>=</span> <span class=nb>Get-Content</span> <span class=n>-Path</span> <span class=n>data</span><span class=p>.</span><span class=n>json</span> <span class=n>-Encoding</span> <span class=n>UTF8</span> <span class=n>-Raw</span>
<span class=nb>Invoke-WebRequest</span> <span class=n>-Uri</span> <span class=n>http</span><span class=err>:</span><span class=p>//</span><span class=n>localhost</span><span class=err>:</span><span class=n>8080</span><span class=p>/</span> <span class=n>-Method</span> <span class=n>POST</span> <span class=n>-Body</span> <span class=nv>$body</span>
</code></pre></div><h2 id=digital-ocean>Digital Ocean</h2><p>I ❤️ DigitalOcean 🐳</p><ul><li><a href=https://github.com/tmux/tmux/wiki/Advanced-Use#piping-pane-changes>https://github.com/tmux/tmux/wiki/Advanced-Use#piping-pane-changes</a></li><li><a href=https://dokku.com/docs/getting-started/install/digitalocean/>https://dokku.com/docs/getting-started/install/digitalocean/</a></li></ul><h3 id=create-a-docker-droplet>Create a Docker Droplet</h3><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>COMPUTE_DOMAIN</span><span class=o>=</span>chadig.com <span class=o>&amp;&amp;</span> <span class=nb>export</span> <span class=nv>COMPUTE_SUBDOMAIN</span><span class=o>=</span>scitt.eve <span class=nb>export</span> <span class=nv>COMPUTE_NAME</span><span class=o>=</span>scitt-eve

doctl compute ssh-key import <span class=k>$(</span>hostname<span class=k>)</span> --public-key-file <span class=s2>&#34;</span><span class=si>${</span><span class=nv>HOME</span><span class=si>}</span><span class=s2>/.ssh/id_rsa.pub&#34;</span><span class=p>;</span> <span class=o>(</span><span class=nb>set</span> -xu <span class=o>&amp;&amp;</span> doctl compute droplet create --ssh-keys <span class=s2>&#34;</span><span class=k>$(</span>ssh-keygen -l -E md5 -f ~/.ssh/id_rsa.pub <span class=p>|</span> awk <span class=s1>&#39;{print $2}&#39;</span> <span class=p>|</span> sed -e <span class=s1>&#39;s/MD5://1&#39;</span><span class=k>)</span><span class=s2>&#34;</span> --image <span class=s2>&#34;</span><span class=k>$(</span>doctl compute image list-distribution --no-header --format Slug <span class=p>|</span> grep fedora <span class=p>|</span> tail -n 1<span class=k>)</span><span class=s2>&#34;</span> --size <span class=k>$(</span>doctl compute size list --no-header --format Slug <span class=p>|</span> head -n <span class=m>2</span> <span class=p>|</span> tail -n 1<span class=k>)</span> --region sfo3 --droplet-agent<span class=o>=</span><span class=nb>true</span> --tag-name scitt <span class=s2>&#34;</span><span class=si>${</span><span class=nv>COMPUTE_NAME</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>&amp;&amp;</span> <span class=nb>time</span> bash -xeuo pipefail -c <span class=s1>&#39;STATUS=new; while [[ &#34;x${STATUS}&#34; = &#34;xnew&#34; ]]; do STATUS=$(doctl compute droplet get --no-header --format Status ${COMPUTE_NAME}); done&#39;</span> <span class=o>&amp;&amp;</span> <span class=nb>export</span> <span class=nv>COMPUTE_IPV4</span><span class=o>=</span><span class=s2>&#34;&#34;</span> <span class=o>&amp;&amp;</span> <span class=k>while</span> <span class=o>[[</span> <span class=s2>&#34;x</span><span class=si>${</span><span class=nv>COMPUTE_IPV4</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;x&#34;</span> <span class=o>]]</span><span class=p>;</span> <span class=k>do</span> <span class=nb>export</span> <span class=nv>COMPUTE_IPV4</span><span class=o>=</span><span class=k>$(</span>doctl compute droplet list --no-header --format PublicIPv4 <span class=s2>&#34;</span><span class=si>${</span><span class=nv>COMPUTE_NAME</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span><span class=p>;</span> <span class=k>done</span> <span class=o>&amp;&amp;</span> doctl compute domain records create --record-name <span class=s2>&#34;</span><span class=si>${</span><span class=nv>COMPUTE_SUBDOMAIN</span><span class=si>}</span><span class=s2>&#34;</span> --record-ttl <span class=m>3600</span> --record-type A --record-data <span class=s2>&#34;</span><span class=si>${</span><span class=nv>COMPUTE_IPV4</span><span class=si>}</span><span class=s2>&#34;</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>COMPUTE_DOMAIN</span><span class=si>}</span><span class=s2>&#34;</span> <span class=o>&amp;&amp;</span> <span class=k>while</span> ! ssh -i <span class=s2>&#34;</span><span class=si>${</span><span class=nv>HOME</span><span class=si>}</span><span class=s2>/.ssh/id_rsa.pub&#34;</span> -o <span class=nv>StrictHostKeyChecking</span><span class=o>=</span>no <span class=s2>&#34;root@</span><span class=si>${</span><span class=nv>COMPUTE_IPV4</span><span class=si>}</span><span class=s2>&#34;</span> <span class=s2>&#34;set -x &amp;&amp; dnf -y install git tmux python3 python3-pip &amp;&amp; tmux new-session -d -s http_server &#39;python -m http.server 80&#39;&#34;</span><span class=p>;</span> <span class=k>do</span> sleep 1<span class=p>;</span> <span class=k>done</span><span class=o>)</span>

doctl compute droplet delete --force <span class=k>$(</span>doctl compute droplet get --no-header --format ID <span class=s2>&#34;</span><span class=si>${</span><span class=nv>COMPUTE_NAME</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span>

<span class=nb>export</span> <span class=nv>COMPUTE_IPV4</span><span class=o>=</span><span class=k>$(</span>doctl compute droplet list --no-header --format PublicIPv4 <span class=s2>&#34;</span><span class=si>${</span><span class=nv>COMPUTE_NAME</span><span class=si>}</span><span class=s2>&#34;</span><span class=k>)</span>
ssh -t -i <span class=s2>&#34;</span><span class=si>${</span><span class=nv>HOME</span><span class=si>}</span><span class=s2>/.ssh/id_rsa.pub&#34;</span> -o <span class=nv>StrictHostKeyChecking</span><span class=o>=</span>no <span class=s2>&#34;root@</span><span class=si>${</span><span class=nv>COMPUTE_IPV4</span><span class=si>}</span><span class=s2>&#34;</span> <span class=s2>&#34;tmux a&#34;</span>
</code></pre></div><h2 id=tar>tar</h2><h3 id=extract-single-file-or-set-of-files>Extract single file or set of files</h3><pre><code class=language-console data-lang=console>$ tar -xzv --to-stdout --wildcards --no-anchored 'path/from/root/*.ext'
</code></pre><p><a href=https://asciinema.org/a/620287><img src=https://asciinema.org/a/620287.svg alt=asciicast></a></p><h2 id=bash>Bash</h2><h3 id=arrays>Arrays</h3><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=cp>#!/usr/bin/env bash
</span><span class=cp></span><span class=c1># Bash Array Example</span>
<span class=c1># @lice: Write a python sphinx extension which transforms source code in bash,</span>
<span class=c1># python, and javascript, with plugins for more languages for source AST to</span>
<span class=c1># docutils class instances. Create a demo for it using this file as an example</span>
<span class=c1># source file to build to using the new plugin. Output in HTML.</span>
<span class=nb>set</span> -exuo pipefail

<span class=nb>declare</span> -a <span class=nv>example_array</span><span class=o>=()</span>

example_array<span class=o>[</span><span class=si>${#</span><span class=nv>example_array</span><span class=p>[@]</span><span class=si>}</span><span class=o>]=</span><span class=s2>&#34;Value for example_array index 0&#34;</span>

<span class=k>for</span> value in <span class=s2>&#34;</span><span class=si>${</span><span class=nv>example_array</span><span class=p>[@]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
  <span class=nb>echo</span> <span class=nv>$value</span>
<span class=k>done</span>
</code></pre></div><h2 id=ffmpeg>ffmpeg</h2><ul><li><a href=https://johnandersen777.github.io/ffmpeg/>https://johnandersen777.github.io/ffmpeg/</a></li></ul></article></div></div></div></main><footer class=footer><div class="ax-l-i max-w-6xl"><nav class="flex items-center justify-center"><a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href=/posts/>Posts</a>
<a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href=/about/>About</a>
<a class="ml-3 first:ml-0 text-sm text-gray-600 hover:text-gray-800" href=/a_guide_to_good/>💊</a></nav><div class="footer-social flex items-center justify-center mt-4"><a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target=_blank rel="noopener nofollow" title=Twitter href=https://mastodon.social/@johnandersen777><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M32 6.078c-1.2.522-2.458.868-3.78 1.036 1.36-.812 2.398-2.088 2.886-3.626a13.11 13.11.0 01-4.16 1.588C25.742 3.794 24.026 3 22.154 3a6.56 6.56.0 00-6.556 6.562c0 .52.044 1.02.152 1.496-5.454-.266-10.28-2.88-13.522-6.862-.566.982-.898 2.106-.898 3.316a6.57 6.57.0 002.914 5.452 6.48 6.48.0 01-2.964-.808v.072c0 3.188 2.274 5.836 5.256 6.446-.534.146-1.116.216-1.72.216-.42.0-.844-.024-1.242-.112.85 2.598 3.262 4.508 6.13 4.57a13.18 13.18.0 01-8.134 2.798c-.538.0-1.054-.024-1.57-.1C2.906 27.93 6.35 29 10.064 29c12.072.0 18.672-10 18.672-18.668.0-.3-.01-.57-.024-.848C30.014 8.56 31.108 7.406 32 6.078z"/></svg></a><a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target=_blank rel="noopener nofollow" title=Github href=https://github.com/johnandersen777><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M15.998.0C7.164.0.0 7.35.0 16.417.0 23.67 4.584 29.82 10.944 31.994c.8.15 1.092-.356 1.092-.79l-.022-2.792c-4.45.99-5.4-2.202-5.4-2.202-.726-1.896-1.776-2.4-1.776-2.4-1.454-1.018.108-.998.108-.998 1.606.117 2.45 1.693 2.45 1.693 1.428 2.507 3.746 1.784 4.658 1.363.144-1.06.558-1.784 1.016-2.195-3.552-.415-7.288-1.823-7.288-8.113.0-1.792.624-3.258 1.648-4.406-.166-.415-.714-2.085.156-4.344.0.0 1.344-.44 4.4 1.683 1.276-.364 2.644-.546 4.006-.552a14.98 14.98.0 014.006.554C23.062 6.37 24.404 6.8 24.404 6.8c.872 2.26.324 3.93.16 4.344 1.026 1.148 1.644 2.614 1.644 4.406.0 6.306-3.74 7.694-7.304 8.1.574.507 1.086 1.51 1.086 3.04l-.02 4.503c0 .44.288.95 1.1.788C27.42 29.817 32 23.667 32 16.417 32 7.35 24.836.0 15.998.0z"/></svg></a><a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target=_blank rel="noopener nofollow" title=Youtube href=https://www.youtube.com/@dffml9083/playlists><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M30.64 7.12c-.868-1.544-1.8-1.828-3.728-1.936C24.996 5.054 20.178 5 16.004 5c-4.182.0-9.002.054-10.916.182-1.914.1-2.858.392-3.734 1.938C.46 8.662.0 11.318.0 15.994V16c0 4.656.46 7.332 1.354 8.858.876 1.544 1.818 1.824 3.732 1.954 1.916.112 6.736.178 10.918.178 4.174.0 8.992-.066 10.9-.176 1.918-.13 2.86-.4 3.728-1.954.902-1.526 1.358-4.202 1.358-8.858v-.016c0-4.678-.456-7.334-1.36-8.876zM12 22V10l10 6-10 6z"/></svg></a><a class="block mx-3 w-6 h-6 text-raven-700 hover:text-raven-900" target=_blank rel="noopener nofollow" title=LinkedIn href=https://www.linkedin.com/in/john-andersen-7a72b555/><svg class="fill-current" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M29.692.0H2.308A2.31 2.31.0 000 2.308v27.384A2.31 2.31.0 002.308 32h27.384A2.31 2.31.0 0032 29.692V2.308A2.31 2.31.0 0029.692.0zM11.35 24.188H7.454V12.464h3.897v11.723zM9.402 10.863h-.025c-1.308.0-2.153-.9-2.153-2.025.0-1.15.872-2.026 2.205-2.026s2.153.875 2.18 2.026c0 1.125-.846 2.025-2.205 2.025zm16 13.324h-3.896v-6.272c0-1.576-.564-2.65-1.974-2.65-1.076.0-1.717.725-2 1.425-.103.25-.128.6-.128.95v6.547h-3.896V12.464h3.896v1.66c.518-.8 1.444-1.935 3.512-1.935 2.564.0 4.486 1.676 4.486 5.276v6.722z"/></svg></a></div><div class="footer-copyright text-sm text-center text-gray-500 mt-4">&#169; 2016-2024 johnandersen777's blog</div><div class="text-sm sm:text-xs text-center text-gray-500 mt-2">Powered by <a href="https://www.axiomtheme.com/?utm_source=theme-footer&utm_medium=website&utm_campaign=referral">Axiom</a></div></div></footer><script src="/bundle.js?v=1729715610"></script></body></html>